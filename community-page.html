<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MogulMomma Community - Connect, Share, Thrive</title>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script src="emailjs-config.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, #7c3aed 0%, #f472b6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .search-box {
            position: relative;
            width: 300px;
        }

        .search-input {
            width: 100%;
            padding: 10px 15px 10px 40px;
            border: 2px solid #e2e8f0;
            border-radius: 25px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #7c3aed;
        }

        .search-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed 0%, #f472b6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Daily Inspiration */
        .daily-inspiration {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 50%, #f472b6 100%);
            color: white;
            margin: 0;
            padding: 25px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .daily-inspiration::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%);
            pointer-events: none;
        }

        .inspiration-content {
            max-width: 600px;
            margin: 0 auto;
            padding: 0 30px;
            position: relative;
            z-index: 1;
        }

        .inspiration-header {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 12px;
            opacity: 0.9;
        }

        .inspiration-quote {
            font-size: 1.4rem;
            font-weight: 300;
            line-height: 1.3;
            margin-bottom: 10px;
            font-style: italic;
        }

        .inspiration-author {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 18px;
        }

        .inspiration-action {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-size: 0.9rem;
        }

        .inspiration-action:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Main Layout */
        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
            display: grid;
            grid-template-columns: 300px 1fr 280px;
            gap: 30px;
        }

        /* Sidebar */
        .sidebar {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            max-height: calc(100vh - 120px);
            overflow-y: auto;
            position: sticky;
            top: 100px;
            scrollbar-width: thin;
            scrollbar-color: #e2e8f0 transparent;
        }

        .sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background-color: #e2e8f0;
            border-radius: 3px;
        }

        .sidebar::-webkit-scrollbar-thumb:hover {
            background-color: #cbd5e1;
        }

        .sidebar-section {
            margin-bottom: 30px;
        }

        .sidebar-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 15px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 15px;
            margin: 5px 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
            font-weight: 500;
            text-decoration: none;
        }

        .nav-item:hover {
            background: #f8fafc;
            color: #7c3aed;
        }

        .nav-item.active {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 100%);
            color: white;
        }

        .nav-icon {
            font-size: 1.1rem;
        }

        .nav-badge {
            background: #ef4444;
            color: white;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: auto;
        }

        .trending-topics {
            list-style: none;
        }

        .trending-topic {
            padding: 8px 0;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .trending-topic:hover {
            color: #7c3aed;
        }

        .trending-topic:last-child {
            border-bottom: none;
        }

        .topic-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 0.9rem;
        }

        .topic-count {
            color: #64748b;
            font-size: 0.8rem;
        }

        /* Main Feed */
        .main-feed {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            overflow: hidden;
        }

        .feed-header {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
        }

        .feed-title {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .feed-subtitle {
            opacity: 0.9;
            font-size: 1rem;
        }

        .post-composer {
            padding: 25px 30px;
            border-bottom: 1px solid #f1f5f9;
        }

        .composer-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .composer-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed 0%, #f472b6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .composer-info h4 {
            color: #1e293b;
            font-weight: 600;
        }

        .composer-info p {
            color: #64748b;
            font-size: 0.9rem;
        }

        .post-input {
            width: 100%;
            min-height: 120px;
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            line-height: 1.5;
            resize: vertical;
            font-family: inherit;
            margin-bottom: 15px;
        }

        .post-input:focus {
            outline: none;
            border-color: #7c3aed;
        }

        .composer-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .composer-tools {
            display: flex;
            gap: 15px;
        }

        .tool-btn {
            background: #f8fafc;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .tool-btn:hover {
            background: #f0f9ff;
            color: #7c3aed;
        }

        .post-btn {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 100%);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .post-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(124, 58, 237, 0.3);
        }

        .post-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Feed Filters */
        .feed-filters {
            padding: 20px 30px;
            border-bottom: 1px solid #f1f5f9;
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .filter-btn {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #64748b;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            border-color: #7c3aed;
            color: #7c3aed;
        }

        .filter-btn.active {
            background: #7c3aed;
            border-color: #7c3aed;
            color: white;
        }

        /* Feed Posts */
        .feed-posts {
            padding: 0 30px 30px;
        }

        .post {
            border-bottom: 1px solid #f1f5f9;
            padding: 25px 0;
            transition: all 0.3s ease;
        }

        .post:last-child {
            border-bottom: none;
        }

        .post:hover {
            background: #fafbfc;
            margin: 0 -30px;
            padding: 25px 30px;
            border-radius: 12px;
        }

        .post-header {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 15px;
        }

        .post-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed 0%, #f472b6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            flex-shrink: 0;
        }

        .post-info {
            flex: 1;
        }

        .post-author {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 3px;
        }

        .post-meta {
            color: #64748b;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .post-badge {
            background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 600;
        }

        .post-content {
            margin-bottom: 15px;
            color: #374151;
            line-height: 1.7;
        }

        .post-tags {
            display: flex;
            gap: 8px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .post-tag {
            background: #f0f9ff;
            color: #3b82f6;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .post-image {
            width: 100%;
            max-width: 500px;
            border-radius: 12px;
            margin-bottom: 15px;
        }

        .post-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .action-btn {
            background: none;
            border: none;
            color: #64748b;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: #f8fafc;
            color: #7c3aed;
        }

        .action-btn.liked {
            color: #ef4444;
        }

        .action-btn.saved {
            color: #10b981;
        }

        /* Right Sidebar */
        .right-sidebar {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .widget {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        }

        .widget-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .member-item:hover {
            background: #f8fafc;
            margin: 0 -25px;
            padding: 12px 25px;
            border-radius: 8px;
        }

        .member-item:last-child {
            border-bottom: none;
        }

        .member-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed 0%, #f472b6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-weight: 600;
            color: #1e293b;
            font-size: 0.9rem;
        }

        .member-title {
            color: #64748b;
            font-size: 0.8rem;
        }

        .connect-btn {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connect-btn:hover {
            transform: translateY(-1px);
        }

        .event-item {
            padding: 15px 0;
            border-bottom: 1px solid #f1f5f9;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .event-item:hover {
            background: #f8fafc;
            margin: 0 -25px;
            padding: 15px 25px;
            border-radius: 8px;
        }

        .event-item:last-child {
            border-bottom: none;
        }

        .event-date {
            background: #7c3aed;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 10px;
        }

        .event-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .event-meta {
            color: #64748b;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .register-btn {
            background: linear-gradient(135deg, #7c3aed 0%, #c084fc 100%);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-start;
            margin-top: 5px;
        }

        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .register-btn:disabled {
            background: #64748b;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .sidebar, .right-sidebar {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 15px;
            }
            
            .search-box {
                width: 200px;
            }
            
            .post-composer {
                padding: 20px 15px;
            }
            
            .feed-posts {
                padding: 0 15px 20px;
            }
            
            .composer-tools {
                flex-wrap: wrap;
                gap: 8px;
            }
        }

        /* Loading States */
        .loading-post {
            padding: 25px 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 4px;
        }

        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        .skeleton-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
        }

        .skeleton-text {
            height: 16px;
            margin: 8px 0;
        }

        .skeleton-line {
            height: 12px;
            margin: 6px 0;
        }

        /* Success States */
        .success-message {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .success-message.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;">
<path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="url(#gradient)"/>
<defs>
<linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
<stop offset="0%" stop-color="#7c3aed"/>
<stop offset="100%" stop-color="#f472b6"/>
</linearGradient>
</defs>
</svg>MogulMomma</div>
            <div class="header-actions">
                <div class="search-box">
                    <span class="search-icon"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg></span>
                    <input type="text" class="search-input" placeholder="Search posts, members, topics...">
                </div>
                <div class="user-avatar">SM</div>
            </div>
        </div>
    </header>

    <!-- Daily Inspiration Section -->
    <div class="daily-inspiration">
        <div class="inspiration-content">
            <div class="inspiration-header"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" fill="white"/></svg>Daily MogulMomma Inspiration</div>
            <div class="inspiration-quote" id="dailyQuote">
                "Your dreams are valid. Today is the day to take one bold step toward making them reality."
            </div>
            <div class="inspiration-author" id="quoteAuthor">â€” MogulMomma Community</div>
            <button class="inspiration-action" onclick="shareInspiration()" id="shareInspirationBtn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Share Today's Inspiration
            </button>
        </div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#10b981" stroke-width="2"/><line x1="9" y1="9" x2="15" y2="9" stroke="#10b981" stroke-width="2"/><line x1="9" y1="15" x2="15" y2="15" stroke="#10b981" stroke-width="2"/></svg>Member Dashboard</h3>
                <div style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #10b981;">
                    <div style="font-weight: 600; color: #15803d; margin-bottom: 10px;">Your Personal HQ</div>
                    <div style="font-size: 0.9rem; color: #15803d; margin-bottom: 15px;">Access AI tools, documents, and track your progress</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="window.location.href='/dashboard'" style="background: white; border: 1px solid #10b981; color: #15803d; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#15803d" stroke-width="2"/><line x1="9" y1="9" x2="15" y2="9" stroke="#15803d" stroke-width="2"/><line x1="9" y1="15" x2="15" y2="15" stroke="#15803d" stroke-width="2"/></svg>Open Dashboard
                        </button>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center;">
                        <a href="/dashboard" style="color: #15803d; text-decoration: none; font-size: 0.8rem; font-weight: 600;">Full Dashboard â†’</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><path d="M12 20V10M18 20V4M6 20v-4" stroke="#7c3aed" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Weekly Life Score</h3>
                <div style="background: linear-gradient(135deg, #f0f9ff, #e0f2fe); padding: 20px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #7c3aed;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <div style="font-weight: 700; color: #1e293b;">Current Score</div>
                        <div style="font-size: 2rem; font-weight: 800; color: #7c3aed;" id="currentLifeScore">7.2</div>
                    </div>
                    <div style="background: #e2e8f0; height: 8px; border-radius: 4px; margin: 8px 0;">
                        <div style="background: linear-gradient(135deg, #7c3aed, #c084fc); height: 100%; width: 72%; border-radius: 4px;"></div>
                    </div>
                    <div style="font-size: 0.8rem; color: #64748b; margin-bottom: 15px;">+0.5 from last week</div>
                    <button onclick="openWeeklyJournal()" style="background: #7c3aed; color: white; border: none; padding: 10px 15px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer; width: 100%; transition: all 0.3s ease;">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z" fill="white"/><polyline points="14,2 14,8 20,8" fill="#7c3aed"/><line x1="16" y1="13" x2="8" y2="13" stroke="#7c3aed" stroke-width="2"/><line x1="16" y1="17" x2="8" y2="17" stroke="#7c3aed" stroke-width="2"/></svg>Weekly Journal
                    </button>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" stroke="#ef4444" stroke-width="2"/></svg>Obstacle Breakthrough</h3>
                <div style="background: linear-gradient(135deg, #fef2f2, #fecaca); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #ef4444;">
                    <div style="font-weight: 600; color: #991b1b; margin-bottom: 10px;">What's Holding You Back?</div>
                    <div style="font-size: 0.9rem; color: #991b1b; margin-bottom: 15px;">Get personalized solutions to overcome your obstacles</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="openObstacleAssessment()" style="background: white; border: 1px solid #ef4444; color: #991b1b; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M9 12l2 2 4-4" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9c2.12 0 4.07.74 5.61 1.98" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Identify My Obstacles
                        </button>
                        <button onclick="viewObstacleSolutions()" style="background: white; border: 1px solid #ef4444; color: #991b1b; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Get Solutions
                        </button>
                        <button onclick="shareObstacleWin()" style="background: white; border: 1px solid #ef4444; color: #991b1b; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13" stroke="#991b1b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Share a Win
                        </button>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center;">
                        <span style="color: #991b1b; font-size: 0.8rem; font-weight: 600;">ðŸ’ª You've Got This!</span>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><circle cx="12" cy="12" r="10" stroke="#f59e0b" stroke-width="2"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="17" x2="12.01" y2="17" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Affiliate Sharing</h3>
                <div style="background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 15px; border-radius: 12px; margin-bottom: 15px;">
                    <div style="font-weight: 600; color: #92400e; margin-bottom: 8px;">Earn with Every Share!</div>
                    <div style="font-size: 0.9rem; color: #92400e; margin-bottom: 15px;">Your inspiration shares automatically include your affiliate link</div>
                    <div style="display: flex; gap: 8px;">
                        <button onclick="updateAffiliateCode()" style="flex: 1; background: #f59e0b; color: white; border: none; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer;">
                            Set Code
                        </button>
                        <button onclick="viewEarnings()" style="flex: 1; background: rgba(245, 158, 11, 0.2); color: #92400e; border: 1px solid #f59e0b; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer;">
                            Earnings
                        </button>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#0284c7" stroke-width="2"/><circle cx="9" cy="9" r="1" fill="#0284c7"/><circle cx="15" cy="15" r="1" fill="#0284c7"/><path d="M9 15h6" stroke="#0284c7" stroke-width="2" stroke-linecap="round"/></svg>AI Tools</h3>
                <div style="background: linear-gradient(135deg, #e0f2fe, #b3e5fc); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #0284c7;">
                    <div style="font-weight: 600; color: #0369a1; margin-bottom: 10px;">Member Exclusive Access</div>
                    <div style="font-size: 0.9rem; color: #0369a1; margin-bottom: 15px;">Unlimited AI tools to accelerate your career transition</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="openAITool('content')" style="background: white; border: 1px solid #0284c7; color: #0369a1; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M17 3a2.85 2.85 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z" stroke="#0369a1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Content Generator
                        </button>
                        <button onclick="openAITool('roadmap')" style="background: white; border: 1px solid #0284c7; color: #0369a1; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0118 0z" stroke="#0369a1" stroke-width="2"/><circle cx="12" cy="10" r="3" stroke="#0369a1" stroke-width="2"/></svg>Roadmap Builder  
                        </button>
                        <button onclick="openAITool('brand')" style="background: white; border: 1px solid #0284c7; color: #0369a1; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><circle cx="12" cy="12" r="3" stroke="#0369a1" stroke-width="2"/><path d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24" stroke="#0369a1" stroke-width="2"/></svg>Brand Identity
                        </button>
                        <button onclick="openAITool('coach')" style="background: white; border: 1px solid #0284c7; color: #0369a1; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M21 15a2 2 0 01-2 2H7l-4 4V5a2 2 0 012-2h14a2 2 0 012 2z" stroke="#0369a1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>AI Career Coach
                        </button>
                        <button onclick="openAITool('image')" style="background: white; border: 1px solid #0284c7; color: #0369a1; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="#0369a1" stroke-width="2"/><circle cx="8.5" cy="8.5" r="1.5" stroke="#0369a1" stroke-width="2"/><polyline points="21,15 16,10 5,21" stroke="#0369a1" stroke-width="2"/></svg>Image Generator
                        </button>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center;">
                        <a href="/ai-tools-unlimited" style="color: #0369a1; text-decoration: none; font-size: 0.8rem; font-weight: 600;">View All Tools â†’</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#7c3aed" stroke-width="2"/><line x1="16" y1="2" x2="16" y2="6" stroke="#7c3aed" stroke-width="2"/><line x1="8" y1="2" x2="8" y2="6" stroke="#7c3aed" stroke-width="2"/><line x1="3" y1="10" x2="21" y2="10" stroke="#7c3aed" stroke-width="2"/></svg>Content Scheduler</h3>
                <div style="background: linear-gradient(135deg, #ede9fe, #c084fc); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #7c3aed;">
                    <div style="font-weight: 600; color: #5b21b6; margin-bottom: 10px;">Plan Your Social Media Strategy</div>
                    <div style="font-size: 0.9rem; color: #5b21b6; margin-bottom: 15px;">Schedule posts across all platforms with AI assistance</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="window.location.href='/calendar'" style="background: white; border: 1px solid #7c3aed; color: #5b21b6; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="#5b21b6" stroke-width="2"/><line x1="16" y1="2" x2="16" y2="6" stroke="#5b21b6" stroke-width="2"/><line x1="8" y1="2" x2="8" y2="6" stroke="#5b21b6" stroke-width="2"/><line x1="3" y1="10" x2="21" y2="10" stroke="#5b21b6" stroke-width="2"/></svg>Open Calendar
                        </button>
                        <button onclick="quickSchedulePost()" style="background: white; border: 1px solid #7c3aed; color: #5b21b6; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M17 3a2.85 2.85 0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z" stroke="#5b21b6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Quick Post
                        </button>
                        <button onclick="viewScheduledPosts()" style="background: white; border: 1px solid #7c3aed; color: #5b21b6; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M12 20V10M18 20V4M6 20v-4" stroke="#5b21b6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>My Schedule
                        </button>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center;">
                        <a href="/calendar" style="color: #5b21b6; text-decoration: none; font-size: 0.8rem; font-weight: 600;">Full Scheduler â†’</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><circle cx="12" cy="12" r="10" stroke="#f59e0b" stroke-width="2"/><path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><line x1="12" y1="17" x2="12.01" y2="17" stroke="#f59e0b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Affiliate Center</h3>
                <div style="background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #f59e0b;">
                    <div style="font-weight: 600; color: #92400e; margin-bottom: 10px;">Earn $48.50/Month Per Referral</div>
                    <div style="font-size: 0.9rem; color: #92400e; margin-bottom: 15px;">Share MogulMomma and earn recurring commissions</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="openAffiliateTracker()" style="background: white; border: 1px solid #f59e0b; color: #92400e; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M12 20V10M18 20V4M6 20v-4" stroke="#92400e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>My Dashboard
                        </button>
                        <button onclick="openAffiliateLinks()" style="background: white; border: 1px solid #f59e0b; color: #92400e; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71" stroke="#92400e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71" stroke="#92400e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>My Links
                        </button>
                        <button onclick="openAffiliateSharing()" style="background: white; border: 1px solid #f59e0b; color: #92400e; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8M16 6l-4-4-4 4M12 2v13" stroke="#92400e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>Quick Share
                        </button>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center;">
                        <a href="/affiliate" style="color: #92400e; text-decoration: none; font-size: 0.8rem; font-weight: 600;">Full Dashboard â†’</a>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><rect x="1" y="4" width="22" height="16" rx="2" ry="2" stroke="#10b981" stroke-width="2"/><line x1="1" y1="10" x2="23" y2="10" stroke="#10b981" stroke-width="2"/></svg>My Subscription</h3>
                <div style="background: linear-gradient(135deg, #f0fdf4, #dcfce7); padding: 15px; border-radius: 12px; margin-bottom: 15px; border-left: 4px solid #10b981;">
                    <div style="font-weight: 600; color: #15803d; margin-bottom: 10px;">MogulMomma Premium - $97/month</div>
                    <div style="font-size: 0.9rem; color: #15803d; margin-bottom: 15px;">Next billing: January 15, 2025</div>
                    
                    <div style="display: grid; gap: 8px;">
                        <button onclick="manageSubscription('billing')" style="background: white; border: 1px solid #10b981; color: #15803d; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="1" y="4" width="22" height="16" rx="2" ry="2" stroke="#15803d" stroke-width="2"/><line x1="1" y1="10" x2="23" y2="10" stroke="#15803d" stroke-width="2"/></svg>Update Payment
                        </button>
                        <button onclick="manageSubscription('pause')" style="background: white; border: 1px solid #f59e0b; color: #92400e; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><rect x="6" y="4" width="4" height="16" fill="#92400e"/><rect x="14" y="4" width="4" height="16" fill="#92400e"/></svg>Pause Subscription
                        </button>
                        <button onclick="manageSubscription('cancel')" style="background: white; border: 1px solid #ef4444; color: #dc2626; padding: 8px 12px; border-radius: 6px; font-size: 0.8rem; font-weight: 600; cursor: pointer; text-align: left; transition: all 0.3s ease;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 6px; vertical-align: middle;"><circle cx="12" cy="12" r="10" stroke="#dc2626" stroke-width="2"/><line x1="15" y1="9" x2="9" y2="15" stroke="#dc2626" stroke-width="2"/><line x1="9" y1="9" x2="15" y2="15" stroke="#dc2626" stroke-width="2"/></svg>Cancel Subscription
                        </button>
                    </div>
                </div>
            </div>

            <div class="sidebar-section">
                <h3 class="sidebar-title">Trending Topics</h3>
                <ul class="trending-topics">
                    <li class="trending-topic">
                        <div class="topic-name">#CareerTransition</div>
                        <div class="topic-count">127 posts this week</div>
                    </li>
                    <li class="trending-topic">
                        <div class="topic-name">#AITools</div>
                        <div class="topic-count">89 posts this week</div>
                    </li>
                    <li class="trending-topic">
                        <div class="topic-name">#WomenInBusiness</div>
                        <div class="topic-count">156 posts this week</div>
                    </li>
                    <li class="trending-topic">
                        <div class="topic-name">#DreamMapping</div>
                        <div class="topic-count">73 posts this week</div>
                    </li>
                    <li class="trending-topic">
                        <div class="topic-name">#Mindset</div>
                        <div class="topic-count">94 posts this week</div>
                    </li>
                </ul>
            </div>
        </aside>

        <!-- Main Feed -->
        <main class="main-feed">
            <div class="feed-header">
                <h1 class="feed-title">MogulMomma Community</h1>
                <p class="feed-subtitle">Connect with ambitious women transforming their dreams into reality</p>
            </div>

            <!-- Success Message -->
            <div class="success-message" id="success-message">
                âœ… Your post has been shared with the community!
            </div>

            <!-- Post Composer -->
            <div class="post-composer">
                <div class="composer-header">
                    <div class="composer-avatar">YU</div>
                    <div class="composer-info">
                        <h4>Your Name</h4>
                        <p>Ready to Transform â€¢ Future Entrepreneur</p>
                    </div>
                </div>
                
                <textarea 
                    class="post-input" 
                    id="post-input"
                    placeholder="Share your journey, ask a question, or celebrate a win with the community..."
                ></textarea>
                
                <div class="composer-actions">
                    <div class="composer-tools">
                        <button class="tool-btn" onclick="addImage()">ðŸ“· Photo</button>
                        <button class="tool-btn" onclick="addPoll()">ðŸ“Š Poll</button>
                        <button class="tool-btn" onclick="addMilestone()">ðŸŽ¯ Milestone</button>
                        <button class="tool-btn" onclick="addResource()">ðŸ“Ž Resource</button>
                    </div>
                    <button class="post-btn" onclick="sharePost()" id="share-btn" disabled>Share Post</button>
                </div>
            </div>

            <!-- Feed Filters -->
            <div class="feed-filters">
                <button class="filter-btn active" onclick="filterPosts('all', this)">All Posts</button>
                <button class="filter-btn" onclick="filterPosts('questions', this)">Questions</button>
                <button class="filter-btn" onclick="filterPosts('wins', this)">Wins & Celebrations</button>
                <button class="filter-btn" onclick="filterPosts('resources', this)">Resources</button>
                <button class="filter-btn" onclick="filterPosts('accountability', this)">Accountability</button>
            </div>

            <!-- Feed Posts -->
            <div class="feed-posts" id="feed-posts">
                <!-- Welcome Post -->
                <article class="post">
                    <div class="post-header">
                        <div class="post-avatar">MM</div>
                        <div class="post-info">
                            <div class="post-author">MogulMomma Team</div>
                            <div class="post-meta">
                                <span>Platform Admin</span>
                                <span>â€¢</span>
                                <span>Just now</span>
                                <span class="post-badge">ðŸ’Ž Premium</span>
                            </div>
                        </div>
                    </div>
                    <div class="post-content">
                        ðŸŽ‰ Welcome to your MogulMomma Community! 
                        <br><br>
                        This is where ambitious women connect, share wins, ask questions, and support each other's dreams. Start by sharing your current goals or biggest challenge - we're here to help you succeed!
                        <br><br>
                        Use the tools in the sidebar to access AI assistance, schedule content, track your progress, and more. Your transformation journey starts here! âœ¨
                    </div>
                    <div class="post-tags">
                        <span class="post-tag">#Welcome</span>
                        <span class="post-tag">#Community</span>
                        <span class="post-tag">#GetStarted</span>
                        <span class="post-tag">#MogulMomma</span>
                    </div>
                    <div class="post-actions">
                        <button class="action-btn" onclick="toggleLike(this)">
                            <span>â¤ï¸</span>
                            <span>12 loves</span>
                        </button>
                        <button class="action-btn" onclick="toggleComments(this)">
                            <span>ðŸ’¬</span>
                            <span>3 comments</span>
                        </button>
                        <button class="action-btn" onclick="toggleSave(this)">
                            <span>ðŸ”–</span>
                            <span>Save</span>
                        </button>
                        <button class="action-btn" onclick="sharePost(this)">
                            <span>ðŸ“¤</span>
                            <span>Share</span>
                        </button>
                    </div>
                </article>

                <!-- Real posts will appear here dynamically -->

                <!-- Community posts will appear here as real members join and post -->

                <!-- Load More Button -->
                <div style="text-align: center; margin-top: 30px;">
                    <button class="post-btn" onclick="loadMorePosts()" style="padding: 15px 30px;">
                        Load More Posts
                    </button>
                </div>
            </div>
        </main>

        <!-- Right Sidebar -->
        <aside class="right-sidebar">
            <!-- Active Members -->
            <div class="widget">
                <h3 class="widget-title">
                    <span>ðŸ‘¥</span>
                    <span>Active Members</span>
                </h3>
                <div style="text-align: center; padding: 30px 15px; color: #64748b;">
                    <div style="font-size: 2rem; margin-bottom: 15px;">ðŸŒŸ</div>
                    <h4 style="color: #1e293b; margin-bottom: 10px;">Building Our Community</h4>
                    <p style="font-size: 0.9rem; line-height: 1.5;">As more amazing women join MogulMomma, you'll see active members here to connect with!</p>
                    <div style="margin-top: 15px;">
                        <button onclick="shareInvitation()" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 10px 20px; border-radius: 8px; font-size: 0.9rem; font-weight: 600; cursor: pointer;">
                            ðŸ’¬ Invite Someone
                        </button>
                    </div>
                </div>
            </div>

            <!-- Upcoming Events -->
            <div class="widget">
                <h3 class="widget-title">
                    <span>ðŸ“…</span>
                    <span>Upcoming Events</span>
                </h3>
                <div class="event-item" onclick="registerForEvent('Dec 20', 'Dream Mapping Workshop', 'zoom_link_1')">
                    <div class="event-date">Dec 20</div>
                    <div class="event-title">Dream Mapping Workshop</div>
                    <div class="event-meta">7:00 PM EST â€¢ 47 attending</div>
                    <button class="register-btn">Register</button>
                </div>
                <div class="event-item" onclick="registerForEvent('Dec 22', 'AI Tools for Business Growth', 'zoom_link_2')">
                    <div class="event-date">Dec 22</div>
                    <div class="event-title">AI Tools for Business Growth</div>
                    <div class="event-meta">2:00 PM EST â€¢ 89 attending</div>
                    <button class="register-btn">Register</button>
                </div>
                <div class="event-item" onclick="registerForEvent('Dec 28', 'New Year Goal Setting Session', 'zoom_link_3')">
                    <div class="event-date">Dec 28</div>
                    <div class="event-title">New Year Goal Setting Session</div>
                    <div class="event-meta">6:00 PM EST â€¢ 156 attending</div>
                    <button class="register-btn">Register</button>
                </div>
                <div class="event-item" onclick="registerForEvent('Jan 5', 'Monthly Accountability Circle', 'zoom_link_4')">
                    <div class="event-date">Jan 5</div>
                    <div class="event-title">Monthly Accountability Circle</div>
                    <div class="event-meta">7:30 PM EST â€¢ 203 attending</div>
                    <button class="register-btn">Register</button>
                </div>
            </div>

            <!-- Quick Stats -->
            <div class="widget">
                <h3 class="widget-title">
                    <span>ðŸ“Š</span>
                    <span>Community Stats</span>
                </h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; text-align: center;">
                    <div style="background: #f0f9ff; padding: 15px; border-radius: 12px;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #3b82f6;">1,247</div>
                        <div style="font-size: 0.8rem; color: #64748b;">Active Members</div>
                    </div>
                    <div style="background: #f0fdf4; padding: 15px; border-radius: 12px;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">89</div>
                        <div style="font-size: 0.8rem; color: #64748b;">Posts Today</div>
                    </div>
                    <div style="background: #fdf4ff; padding: 15px; border-radius: 12px;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #c084fc;">23</div>
                        <div style="font-size: 0.8rem; color: #64748b;">New Members</div>
                    </div>
                    <div style="background: #fef7f0; padding: 15px; border-radius: 12px;">
                        <div style="font-size: 1.5rem; font-weight: 700; color: #f97316;">456</div>
                        <div style="font-size: 0.8rem; color: #64748b;">Comments</div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Weekly Journal Modal -->
    <div id="journalModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 10000; backdrop-filter: blur(5px);">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; border-radius: 20px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);">
            <div style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; padding: 25px; border-radius: 20px 20px 0 0;">
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <h2 style="margin: 0; font-size: 1.5rem;">ðŸ“ Weekly Life Journal</h2>
                    <button onclick="closeWeeklyJournal()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 1.5rem; width: 35px; height: 35px; border-radius: 50%; cursor: pointer;">&times;</button>
                </div>
                <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 0.95rem;">Reflect on your week and track your progress</p>
            </div>
            
            <div style="padding: 30px;">
                <!-- Life Score Section -->
                <div style="margin-bottom: 30px;">
                    <h3 style="color: #1e293b; margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                        ðŸ“Š Rate Your Week (1-10)
                    </h3>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">ðŸŽ¯ Dream Progress</label>
                            <input type="range" min="1" max="10" value="7" id="careerScore" style="width: 100%; margin-bottom: 5px;">
                            <div style="font-size: 0.9rem; color: #64748b; text-align: center;" id="careerScoreValue">7/10</div>
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">ðŸ“ˆ Skill Expansion</label>
                            <input type="range" min="1" max="10" value="8" id="growthScore" style="width: 100%; margin-bottom: 5px;">
                            <div style="font-size: 0.9rem; color: #64748b; text-align: center;" id="growthScoreValue">8/10</div>
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">âš–ï¸ Life Harmony</label>
                            <input type="range" min="1" max="10" value="6" id="balanceScore" style="width: 100%; margin-bottom: 5px;">
                            <div style="font-size: 0.9rem; color: #64748b; text-align: center;" id="balanceScoreValue">6/10</div>
                        </div>
                        
                        <div>
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">ðŸš€ Digital Empowerment</label>
                            <input type="range" min="1" max="10" value="7" id="confidenceScore" style="width: 100%; margin-bottom: 5px;">
                            <div style="font-size: 0.9rem; color: #64748b; text-align: center;" id="confidenceScoreValue">7/10</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px; background: #f8fafc; padding: 15px; border-radius: 12px; text-align: center;">
                        <div style="font-weight: 600; color: #374151;">Overall Life Score</div>
                        <div style="font-size: 2rem; font-weight: 800; color: #7c3aed;" id="overallScore">7.0</div>
                    </div>
                </div>
                
                <!-- Journal Sections -->
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">ðŸŽ‰ Week's Wins</h3>
                    <textarea id="weekWins" placeholder="What victories, big or small, did you achieve this week?" style="width: 100%; min-height: 80px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">ðŸ§© Challenges & Lessons</h3>
                    <textarea id="weekChallenges" placeholder="What obstacles did you face? What did you learn from them?" style="width: 100%; min-height: 80px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">ðŸŽ¯ Next Week's Focus</h3>
                    <textarea id="nextWeekGoals" placeholder="What are your top 3 priorities for next week?" style="width: 100%; min-height: 80px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <h3 style="color: #1e293b; margin-bottom: 15px;">ðŸ’­ Reflection</h3>
                    <textarea id="weekReflection" placeholder="Any other thoughts, insights, or gratitude you want to capture?" style="width: 100%; min-height: 100px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit;"></textarea>
                </div>
                
                <div style="display: flex; gap: 10px;">
                    <button onclick="saveJournalEntry()" style="flex: 2; background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 1rem;">
                        ðŸ’¾ Save Journal Entry
                    </button>
                    <button onclick="viewJournalHistory()" style="flex: 1; background: #f59e0b; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                        ðŸ“– History
                    </button>
                    <button onclick="closeWeeklyJournal()" style="background: #e5e7eb; color: #374151; border: none; padding: 15px 20px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // EmailJS Configuration
        (function() {
            emailjs.init({
                publicKey: 'SAU17WFhPmeQLrng7',
            });
            console.log('EmailJS initialized for MogulMomma platform');
        })();
        
        // Trial Access Check
        function checkTrialAccess() {
            const trialAccess = JSON.parse(localStorage.getItem('mogulmomma_trial_access') || 'null');
            const subscriptionStatus = localStorage.getItem('mogulmomma_subscription_status') || null;
            
            // Allow access if they have trial access or active subscription
            if (trialAccess || subscriptionStatus === 'active') {
                console.log('Access granted - Trial or active subscription');
                return true;
            }
            
            // Check if trial access has expired
            if (trialAccess && new Date() > new Date(trialAccess.expiresAt)) {
                localStorage.removeItem('mogulmomma_trial_access');
                console.log('Trial access expired');
            }
            
            return false;
        }
        
        // Check access on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if this is a demo view (for showing to users)
            const urlParams = new URLSearchParams(window.location.search);
            const isDemo = urlParams.get('demo') === 'true';
            
            if (isDemo) {
                console.log('Demo mode - full access granted');
                addDemoNotice();
                initializePage();
                return;
            }
            
            if (!checkTrialAccess()) {
                console.log('No access - redirecting to trial page');
                window.location.href = '/trial-access';
                return;
            }
            
            // Initialize page functionality
            initializePage();
        });
        
        function addDemoNotice() {
            const demoNotice = document.createElement('div');
            demoNotice.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; z-index: 10001;
                background: linear-gradient(135deg, #7c3aed, #c084fc);
                color: white; padding: 10px 20px; text-align: center;
                font-weight: 600; font-size: 0.9rem;
            `;
            demoNotice.innerHTML = `
                ðŸŽ­ DEMO MODE - Preview the MogulMomma Community Experience | 
                <a href="/trial-access" style="color: white; text-decoration: underline;">Get 5-Day Free Trial â†’</a>
            `;
            document.body.insertBefore(demoNotice, document.body.firstChild);
            
            // Adjust header position
            const header = document.querySelector('.header');
            if (header) {
                header.style.marginTop = '40px';
            }
        }
        
        function initializePage() {
            console.log('Initializing community page...');
            
            // Initialize Supabase
            initializeSupabase();
            
            // Initialize daily quotes
            displayDailyQuote();
            
            // Initialize search functionality
            initializeSearch();
            
            // Initialize weekly journal scoring sliders
            initializeJournalSliders();
            
            // Display current life score
            updateCurrentLifeScore();
        }
        
        // Post input handling
        const postInput = document.getElementById('post-input');
        const shareBtn = document.getElementById('share-btn');

        postInput.addEventListener('input', function() {
            const hasContent = this.value.trim().length > 0;
            shareBtn.disabled = !hasContent;
            shareBtn.style.opacity = hasContent ? '1' : '0.6';
        });

        // Post sharing
        function sharePost() {
            const content = postInput.value.trim();
            if (!content) return;

            // Show loading state
            shareBtn.textContent = 'Sharing...';
            shareBtn.disabled = true;

            // Simulate API call
            setTimeout(() => {
                // Reset form
                postInput.value = '';
                shareBtn.textContent = 'Share Post';
                shareBtn.disabled = true;
                shareBtn.style.opacity = '0.6';

                // Show success message
                const successMsg = document.getElementById('success-message');
                successMsg.classList.add('show');
                setTimeout(() => {
                    successMsg.classList.remove('show');
                }, 3000);

                // Add new post to feed (simulate)
                addNewPostToFeed(content);
            }, 1000);
        }

        // Add new post to feed
        function addNewPostToFeed(content) {
            const feedPosts = document.getElementById('feed-posts');
            const newPost = document.createElement('article');
            newPost.className = 'post';
            newPost.innerHTML = `
                <div class="post-header">
                    <div class="post-avatar">YU</div>
                    <div class="post-info">
                        <div class="post-author">You</div>
                        <div class="post-meta">
                            <span>Community Member</span>
                            <span>â€¢</span>
                            <span>Just now</span>
                            <span class="post-badge">ðŸ’Ž Premium</span>
                        </div>
                    </div>
                </div>
                <div class="post-content">${content}</div>
                <div class="post-actions">
                    <button class="action-btn" onclick="toggleLike(this)">
                        <span>â¤ï¸</span>
                        <span>0 loves</span>
                    </button>
                    <button class="action-btn" onclick="toggleComments(this)">
                        <span>ðŸ’¬</span>
                        <span>0 comments</span>
                    </button>
                    <button class="action-btn" onclick="toggleSave(this)">
                        <span>ðŸ”–</span>
                        <span>Save</span>
                    </button>
                    <button class="action-btn" onclick="sharePost(this)">
                        <span>ðŸ“¤</span>
                        <span>Share</span>
                    </button>
                </div>
            `;
            
            feedPosts.insertBefore(newPost, feedPosts.firstChild);
        }

        // Post interactions
        function toggleLike(btn) {
            btn.classList.toggle('liked');
            const span = btn.querySelector('span:last-child');
            const currentCount = parseInt(span.textContent.split(' ')[0]);
            const newCount = btn.classList.contains('liked') ? currentCount + 1 : currentCount - 1;
            span.textContent = `${newCount} loves`;
        }

        function toggleSave(btn) {
            btn.classList.toggle('saved');
            const span = btn.querySelector('span:last-child');
            span.textContent = btn.classList.contains('saved') ? 'Saved' : 'Save';
        }

        function toggleComments(btn) {
            // Would open comments panel
            console.log('Opening comments...');
        }

        // Filter posts
        function filterPosts(filter, clickedButton) {
            // Prevent default behavior and page jumping
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            
            // Update active filter button
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // If clickedButton is passed, use it; otherwise use event.target
            const targetButton = clickedButton || event.target;
            targetButton.classList.add('active');

            // Get all posts
            const posts = document.querySelectorAll('.post');
            
            posts.forEach(post => {
                const postContent = post.textContent.toLowerCase();
                const postTags = post.querySelectorAll('.post-tag');
                let shouldShow = false;
                
                if (filter === 'all') {
                    shouldShow = true;
                } else if (filter === 'questions') {
                    shouldShow = postContent.includes('question') || 
                               postContent.includes('how do') || 
                               postContent.includes('advice') || 
                               postContent.includes('help') ||
                               Array.from(postTags).some(tag => tag.textContent.toLowerCase().includes('question'));
                } else if (filter === 'wins') {
                    shouldShow = postContent.includes('win!') || 
                               postContent.includes('success') || 
                               postContent.includes('celebration') || 
                               postContent.includes('achieved') ||
                               postContent.includes('signed') ||
                               Array.from(postTags).some(tag => tag.textContent.toLowerCase().includes('win'));
                } else if (filter === 'resources') {
                    shouldShow = postContent.includes('resource') || 
                               postContent.includes('tool') || 
                               postContent.includes('book') || 
                               postContent.includes('article') ||
                               postContent.includes('link') ||
                               Array.from(postTags).some(tag => tag.textContent.toLowerCase().includes('resource'));
                } else if (filter === 'accountability') {
                    shouldShow = postContent.includes('accountability') || 
                               postContent.includes('partner') || 
                               postContent.includes('check-in') || 
                               postContent.includes('goal') ||
                               postContent.includes('progress') ||
                               Array.from(postTags).some(tag => tag.textContent.toLowerCase().includes('accountability'));
                }
                
                // Show/hide post with animation
                if (shouldShow) {
                    post.style.display = 'block';
                    post.style.opacity = '0';
                    setTimeout(() => {
                        post.style.opacity = '1';
                    }, 100);
                } else {
                    post.style.opacity = '0';
                    setTimeout(() => {
                        post.style.display = 'none';
                    }, 300);
                }
            });
            
            // Update filter message
            updateFilterMessage(filter, posts);
        }
        
        function updateFilterMessage(filter, posts) {
            const feedHeader = document.querySelector('.feed-header');
            let existingMessage = feedHeader.querySelector('.filter-message');
            if (existingMessage) {
                existingMessage.remove();
            }
            
            const visiblePosts = Array.from(posts).filter(post => 
                post.style.display !== 'none' && post.style.opacity !== '0'
            );
            
            if (filter !== 'all') {
                const filterNames = {
                    'questions': 'Questions & Advice',
                    'wins': 'Wins & Celebrations', 
                    'resources': 'Resources & Tools',
                    'accountability': 'Accountability & Goals'
                };
                
                const message = document.createElement('div');
                message.className = 'filter-message';
                message.style.cssText = `
                    background: #f1f5f9; 
                    padding: 10px 15px; 
                    border-radius: 8px; 
                    margin-top: 10px; 
                    font-size: 0.9rem; 
                    color: #64748b;
                    border-left: 3px solid #7c3aed;
                `;
                message.innerHTML = `ðŸ“‹ Showing ${filterNames[filter]} (${visiblePosts.length} posts) - <button onclick="filterPosts('all', document.querySelector('.filter-btn'))" style="background: none; border: none; color: #7c3aed; cursor: pointer; text-decoration: underline;">Show All</button>`;
                
                feedHeader.appendChild(message);
            }
        }

        // Load more posts
        function loadMorePosts() {
            const btn = event.target;
            const originalText = btn.textContent;
            btn.textContent = 'Loading...';
            btn.disabled = true;

            // Simulate loading more posts
            setTimeout(() => {
                btn.textContent = originalText;
                btn.disabled = false;
                // In real app, would append new posts to feed
                console.log('Loaded more posts');
            }, 1000);
        }

        // Composer tools
        function addImage() {
            console.log('Adding image...');
            // Would open image selector/upload
        }

        function addPoll() {
            console.log('Adding poll...');
            // Would add poll creation interface
        }

        function addMilestone() {
            console.log('Adding milestone...');
            // Would add milestone tracking
        }

        function addResource() {
            console.log('Adding resource...');
            // Would add resource link interface
        }

        // Search functionality
        const searchInput = document.querySelector('.search-input');
        searchInput.addEventListener('input', function() {
            const query = this.value.trim().toLowerCase();
            
            if (query.length === 0) {
                // Clear search - show all content
                clearSearchResults();
                return;
            }
            
            if (query.length > 2) {
                performSearch(query);
            }
        });
        
        function performSearch(query) {
            // Search posts
            const posts = document.querySelectorAll('.post');
            let foundPosts = 0;
            
            posts.forEach(post => {
                const content = post.textContent.toLowerCase();
                const author = post.querySelector('.post-author')?.textContent.toLowerCase() || '';
                const tags = Array.from(post.querySelectorAll('.post-tag')).map(tag => tag.textContent.toLowerCase()).join(' ');
                
                if (content.includes(query) || author.includes(query) || tags.includes(query)) {
                    post.style.display = 'block';
                    post.style.opacity = '1';
                    foundPosts++;
                } else {
                    post.style.display = 'none';
                    post.style.opacity = '0';
                }
            });
            
            // Search members
            const members = document.querySelectorAll('.member-item');
            let foundMembers = 0;
            
            members.forEach(member => {
                const name = member.querySelector('.member-name')?.textContent.toLowerCase() || '';
                const title = member.querySelector('.member-title')?.textContent.toLowerCase() || '';
                
                if (name.includes(query) || title.includes(query)) {
                    member.style.display = 'flex';
                    member.style.opacity = '1';
                    foundMembers++;
                } else {
                    member.style.display = 'none';
                    member.style.opacity = '0';
                }
            });
            
            // Search trending topics
            const topics = document.querySelectorAll('.trending-topic');
            let foundTopics = 0;
            
            topics.forEach(topic => {
                const topicName = topic.querySelector('.topic-name')?.textContent.toLowerCase() || '';
                
                if (topicName.includes(query)) {
                    topic.style.display = 'block';
                    topic.style.opacity = '1';
                    foundTopics++;
                } else {
                    topic.style.display = 'none';
                    topic.style.opacity = '0';
                }
            });
            
            // Show search results summary
            showSearchResults(query, foundPosts, foundMembers, foundTopics);
        }
        
        function clearSearchResults() {
            // Show all posts
            document.querySelectorAll('.post').forEach(post => {
                post.style.display = 'block';
                post.style.opacity = '1';
            });
            
            // Show all members
            document.querySelectorAll('.member-item').forEach(member => {
                member.style.display = 'flex';
                member.style.opacity = '1';
            });
            
            // Show all topics
            document.querySelectorAll('.trending-topic').forEach(topic => {
                topic.style.display = 'block';
                topic.style.opacity = '1';
            });
            
            // Remove search results banner
            const existingBanner = document.querySelector('.search-results-banner');
            if (existingBanner) {
                existingBanner.remove();
            }
        }
        
        function showSearchResults(query, foundPosts, foundMembers, foundTopics) {
            // Remove existing banner
            const existingBanner = document.querySelector('.search-results-banner');
            if (existingBanner) {
                existingBanner.remove();
            }
            
            // Create search results banner
            const banner = document.createElement('div');
            banner.className = 'search-results-banner';
            banner.style.cssText = `
                background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
                border: 1px solid #3b82f6;
                border-radius: 12px;
                padding: 15px;
                margin: 20px 0;
                animation: fadeIn 0.3s ease;
            `;
            
            const totalResults = foundPosts + foundMembers + foundTopics;
            
            banner.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600; color: #1e40af; margin-bottom: 5px;">
                            ðŸ” Search Results for "${query}"
                        </div>
                        <div style="font-size: 0.9rem; color: #3730a3;">
                            Found: ${foundPosts} posts, ${foundMembers} members, ${foundTopics} topics (${totalResults} total)
                        </div>
                    </div>
                    <button onclick="clearSearchAndFocus()" style="background: #3b82f6; color: white; border: none; padding: 8px 15px; border-radius: 6px; font-size: 0.8rem; cursor: pointer;">
                        Clear Search
                    </button>
                </div>
                
                ${totalResults === 0 ? `
                    <div style="margin-top: 10px; padding: 10px; background: #fef3c7; border-radius: 6px; color: #92400e; font-size: 0.9rem;">
                        ðŸ’¡ No results found. Try searching for members like "Sarah", topics like "#AI", or content keywords.
                    </div>
                ` : ''}
            `;
            
            // Insert banner at top of main feed
            const feedHeader = document.querySelector('.feed-header');
            feedHeader.insertAdjacentElement('afterend', banner);
        }
        
        function clearSearchAndFocus() {
            document.querySelector('.search-input').value = '';
            clearSearchResults();
            document.querySelector('.search-input').focus();
        }

        // Simulate real-time updates
        setInterval(() => {
            // Update member count, new posts indicator, etc.
            updateCommunityStats();
        }, 30000); // Every 30 seconds

        function updateCommunityStats() {
            // Would fetch real-time stats from API
            console.log('Updating community stats...');
        }

        // Auto-expand textarea
        postInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Event registration function
        function registerForEvent(date, title, zoomId) {
            event.stopPropagation();
            
            // Zoom meeting URLs (these would be stored in your database)
            const zoomLinks = {
                'zoom_link_1': 'https://us06web.zoom.us/j/81234567890?pwd=VGhpc2lzYXRlc3Rjb2Rl',
                'zoom_link_2': 'https://us06web.zoom.us/j/81234567891?pwd=VGhpc2lzYXRlc3Rjb2Rl',
                'zoom_link_3': 'https://us06web.zoom.us/j/81234567892?pwd=VGhpc2lzYXRlc3Rjb2Rl',
                'zoom_link_4': 'https://us06web.zoom.us/j/81234567893?pwd=VGhpc2lzYXRlc3Rjb2Rl'
            };
            
            const btn = event.target;
            const originalText = btn.textContent;
            
            // Show loading state
            btn.textContent = 'Registering...';
            btn.disabled = true;
            
            // Show professional registration modal instead of browser popup
            setTimeout(() => {
                showRegistrationSuccessModal(title, date, zoomLinks[zoomId]);
                
                btn.textContent = 'Registered âœ“';
                btn.style.background = '#10b981';
                btn.disabled = true;
                
                // Update attendance count
                const eventItem = btn.closest('.event-item');
                const metaText = eventItem.querySelector('.event-meta');
                const currentCount = parseInt(metaText.textContent.match(/(\d+) attending/)[1]);
                metaText.textContent = metaText.textContent.replace(/\d+ attending/, `${currentCount + 1} attending`);
                
            }, 1500);
        }

        function showRegistrationSuccessModal(title, date, zoomLink) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10001; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
                backdrop-filter: blur(5px);
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 40px; max-width: 500px; width: 100%; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.3);">
                    <div style="font-size: 4rem; margin-bottom: 20px;">ðŸŽ‰</div>
                    <h2 style="color: #1e293b; margin-bottom: 15px; font-size: 1.5rem;">Registration Confirmed!</h2>
                    <p style="color: #64748b; margin-bottom: 25px; font-size: 1.1rem;">You're all set for <strong>"${title}"</strong> on <strong>${date}</strong></p>
                    
                    <div style="background: #f8fafc; padding: 20px; border-radius: 12px; margin-bottom: 25px; text-align: left;">
                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                            <span style="font-size: 1.2rem; margin-right: 10px;">ðŸ“§</span>
                            <span style="color: #64748b;">Calendar invite sent to your email</span>
                        </div>
                        <div style="display: flex; align-items: center; margin-bottom: 12px;">
                            <span style="font-size: 1.2rem; margin-right: 10px;">ðŸ”—</span>
                            <span style="color: #64748b;">Zoom link included in invite</span>
                        </div>
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 1.2rem; margin-right: 10px;">â°</span>
                            <span style="color: #64748b;">Reminder set 15 minutes before</span>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: center;">
                        <button onclick="copyZoomLink('${zoomLink}')" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                            ðŸ“‹ Copy Zoom Link
                        </button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: #f1f5f9; color: #64748b; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                            Got It!
                        </button>
                    </div>
                    
                    <p style="color: #64748b; font-size: 0.9rem; margin-top: 20px;">
                        ðŸ’¡ <strong>Pro Tip:</strong> Join 5 minutes early to test your audio and video
                    </p>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Close on background click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function copyZoomLink(zoomLink) {
            navigator.clipboard.writeText(zoomLink).then(() => {
                // Show brief confirmation
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ… Copied!';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'linear-gradient(135deg, #7c3aed, #c084fc)';
                }, 2000);
            }).catch(() => {
                alert('Zoom link: ' + zoomLink);
            });
        }

        // Daily Inspiration Quotes
        const dailyQuotes = [
            {
                quote: "Your dreams are valid. Today is the day to take one bold step toward making them reality.",
                author: "MogulMomma Community"
            },
            {
                quote: "You already have everything within you to succeed. Trust yourself and take action.",
                author: "Unknown"
            },
            {
                quote: "The woman who follows the crowd will usually go no further than the crowd. The woman who walks alone is likely to find herself in places no one has ever been before.",
                author: "Albert Einstein"
            },
            {
                quote: "Success isn't about being perfect. It's about being consistent and never giving up on your dreams.",
                author: "MogulMomma Wisdom"
            },
            {
                quote: "Your current situation is not your final destination. Keep moving forward.",
                author: "Unknown"
            },
            {
                quote: "The most powerful woman is one who has learned to trust her own voice and act on her vision.",
                author: "MogulMomma Community"
            },
            {
                quote: "Don't wait for opportunity. Create it. Your dreams are waiting for you to show up.",
                author: "Unknown"
            },
            {
                quote: "Every expert was once a beginner. Every pro was once an amateur. Every icon was once an unknown.",
                author: "Robin Sharma"
            },
            {
                quote: "Your transition isn't a detourâ€”it's your path to your true calling.",
                author: "MogulMomma Wisdom"
            },
            {
                quote: "The woman who is determined to do something will find a way; the woman who isn't will find an excuse.",
                author: "Unknown"
            },
            {
                quote: "You are never too old to set another goal or to dream a new dream.",
                author: "C.S. Lewis"
            },
            {
                quote: "Your career change isn't starting overâ€”it's stepping up to who you were always meant to be.",
                author: "MogulMomma Community"
            },
            {
                quote: "The only impossible journey is the one you never begin.",
                author: "Tony Robbins"
            },
            {
                quote: "Your experience isn't baggageâ€”it's your unique competitive advantage.",
                author: "MogulMomma Wisdom"
            },
            {
                quote: "Believe in yourself and all that you are. Know that there is something inside you that is greater than any obstacle.",
                author: "Christian D. Larson"
            }
        ];

        function loadDailyInspiration() {
            // Get current date and use it to select quote (changes daily)
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / 1000 / 60 / 60 / 24);
            const quoteIndex = dayOfYear % dailyQuotes.length;
            
            const todaysQuote = dailyQuotes[quoteIndex];
            
            document.getElementById('dailyQuote').textContent = `"${todaysQuote.quote}"`;
            document.getElementById('quoteAuthor').textContent = `â€” ${todaysQuote.author}`;
        }

        function shareInspiration() {
            const quote = document.getElementById('dailyQuote').textContent;
            const author = document.getElementById('quoteAuthor').textContent;
            
            // Get user's affiliate code from localStorage or prompt for it
            let affiliateCode = localStorage.getItem('mogulmomma_affiliate_code');
            
            if (!affiliateCode) {
                affiliateCode = prompt('Enter your MogulMomma affiliate code (optional):');
                if (affiliateCode) {
                    localStorage.setItem('mogulmomma_affiliate_code', affiliateCode.toUpperCase());
                }
            }
            
            // Create share URL with affiliate code
            const baseUrl = 'https://mogulmomma.com';
            const shareUrl = affiliateCode ? `${baseUrl}?ref=${affiliateCode}` : baseUrl;
            
            // Create enhanced share text with affiliate info
            const shareText = affiliateCode ? 
            `${quote} ${author} 

Ready to transform your career transition into your greatest success story? 

Join the MogulMomma community: ${shareUrl}

ðŸŽ¯ Shared by ${affiliateCode} - Join our community of accomplished women building their dream careers!

#MogulMomma #CareerTransition #WomenInBusiness #DreamMapping` :
            `${quote} ${author} 

Ready to transform your career transition into your greatest success story? 

Join the MogulMomma community: ${shareUrl}

#MogulMomma #CareerTransition #WomenInBusiness #DreamMapping`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Daily MogulMomma Inspiration',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                // Fallback: copy to clipboard
                navigator.clipboard.writeText(shareText).then(() => {
                    if (affiliateCode) {
                        alert(`âœ… AFFILIATE SHARE READY!

ðŸ“‹ Inspiration copied with your affiliate link!
ðŸ”— Your link: ${shareUrl}
ðŸ’° Affiliate Code: ${affiliateCode}

ðŸ“§ IMPORTANT: Save this info for tracking:
- Your referral link: ${shareUrl}
- Your affiliate code: ${affiliateCode}
- Share date: ${new Date().toLocaleDateString()}

When someone signs up through your link, email us at hello@mogulmomma.com with:
"New referral from ${affiliateCode} on ${new Date().toLocaleDateString()}"

ðŸ’° You'll earn 30% commission ($29.10) for each $97/month subscription!`);
                    } else {
                        alert('âœ… Inspiration copied to clipboard! Share it with someone who needs motivation today.');
                    }
                }).catch(() => {
                    // Double fallback: show share dialog
                    const message = `Share today's inspiration:\n\n${shareText}`;
                    alert(message);
                });
            }
        }
        
        // Function to update affiliate code
        function updateAffiliateCode() {
            const newCode = prompt('Enter your MogulMomma affiliate code:', localStorage.getItem('mogulmomma_affiliate_code') || '');
            if (newCode !== null) {
                if (newCode.trim() === '') {
                    localStorage.removeItem('mogulmomma_affiliate_code');
                    alert('Affiliate code removed. Your shares will use the standard link.');
                } else {
                    localStorage.setItem('mogulmomma_affiliate_code', newCode.toUpperCase());
                    alert(`Affiliate code updated to: ${newCode.toUpperCase()}`);
                }
                updateShareButtonText();
            }
        }
        
        // Function to view earnings
        function viewEarnings() {
            const affiliateCode = localStorage.getItem('mogulmomma_affiliate_code');
            if (!affiliateCode) {
                alert('Please set your affiliate code first to track earnings.');
                return;
            }
            
            // For demo - in production this would fetch from your affiliate tracking system
            const demoEarnings = {
                totalEarnings: 145.50,
                thisMonth: 47.30,
                referrals: 5,
                conversionRate: '12%'
            };
            
            alert(`ðŸ’° Affiliate Earnings (${affiliateCode})
            
ðŸ“Š Total Earnings: $${demoEarnings.totalEarnings}
ðŸ“… This Month: $${demoEarnings.thisMonth}
ðŸ‘¥ Referrals: ${demoEarnings.referrals}
ðŸ“ˆ Conversion Rate: ${demoEarnings.conversionRate}

ðŸ”— Your Referral Link: https://mogulmomma.com?ref=${affiliateCode}

ðŸ“§ To claim earnings, email hello@mogulmomma.com with:
- Your affiliate code: ${affiliateCode}
- List of referral dates and names (if known)

ðŸ’° Commission: $29.10 per $97/month subscription!

Visit affiliate-dashboard.html for detailed tracking!`);
        }
        
        // Update share button text based on affiliate status
        function updateShareButtonText() {
            const affiliateCode = localStorage.getItem('mogulmomma_affiliate_code');
            const button = document.getElementById('shareInspirationBtn');
            if (button) {
                if (affiliateCode) {
                    button.innerHTML = `ðŸ’° Share & Earn (${affiliateCode})`;
                } else {
                    button.innerHTML = 'ðŸ’œ Share Today\'s Inspiration';
                }
            }
        }

        // Weekly Journal Functions
        function openWeeklyJournal() {
            document.getElementById('journalModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
            loadJournalData();
            setupScoreUpdaters();
        }

        function closeWeeklyJournal() {
            document.getElementById('journalModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function setupScoreUpdaters() {
            const scoreInputs = ['careerScore', 'growthScore', 'balanceScore', 'confidenceScore'];
            
            scoreInputs.forEach(scoreId => {
                const input = document.getElementById(scoreId);
                const valueDisplay = document.getElementById(scoreId + 'Value');
                
                input.addEventListener('input', function() {
                    valueDisplay.textContent = `${this.value}/10`;
                    updateOverallScore();
                });
            });
        }

        function updateOverallScore() {
            const career = parseInt(document.getElementById('careerScore').value);
            const growth = parseInt(document.getElementById('growthScore').value);
            const balance = parseInt(document.getElementById('balanceScore').value);
            const confidence = parseInt(document.getElementById('confidenceScore').value);
            
            const overall = ((career + growth + balance + confidence) / 4).toFixed(1);
            document.getElementById('overallScore').textContent = overall;
            
            // Update sidebar score
            document.getElementById('currentLifeScore').textContent = overall;
        }

        async function saveJournalEntry() {
            const journalData = {
                week_start: getWeekStart(),
                career_score: parseInt(document.getElementById('careerScore').value),
                growth_score: parseInt(document.getElementById('growthScore').value),
                balance_score: parseInt(document.getElementById('balanceScore').value),
                confidence_score: parseInt(document.getElementById('confidenceScore').value),
                overall_score: parseFloat(document.getElementById('overallScore').textContent),
                week_wins: document.getElementById('weekWins').value,
                week_challenges: document.getElementById('weekChallenges').value,
                next_week_goals: document.getElementById('nextWeekGoals').value,
                reflection: document.getElementById('weekReflection').value,
                created_at: new Date().toISOString()
            };

            try {
                // Save to localStorage for now (can be enhanced with Supabase later)
                const existingEntries = JSON.parse(localStorage.getItem('mogulmomma_journal_entries') || '[]');
                
                // Check if entry for this week already exists
                const thisWeekIndex = existingEntries.findIndex(entry => entry.week_start === journalData.week_start);
                
                if (thisWeekIndex >= 0) {
                    existingEntries[thisWeekIndex] = journalData;
                } else {
                    existingEntries.push(journalData);
                }
                
                // Keep only last 12 weeks
                existingEntries.sort((a, b) => new Date(b.week_start) - new Date(a.week_start));
                if (existingEntries.length > 12) {
                    existingEntries.splice(12);
                }
                
                localStorage.setItem('mogulmomma_journal_entries', JSON.stringify(existingEntries));
                
                // Show success message
                alert('âœ… Journal entry saved! Your reflection helps track your progress toward your dreams.');
                closeWeeklyJournal();
                
            } catch (error) {
                console.error('Error saving journal entry:', error);
                alert('âŒ Error saving journal entry. Please try again.');
            }
        }

        function loadJournalData() {
            try {
                const entries = JSON.parse(localStorage.getItem('mogulmomma_journal_entries') || '[]');
                const thisWeek = getWeekStart();
                const thisWeekEntry = entries.find(entry => entry.week_start === thisWeek);
                
                if (thisWeekEntry) {
                    // Load existing data
                    document.getElementById('careerScore').value = thisWeekEntry.career_score;
                    document.getElementById('growthScore').value = thisWeekEntry.growth_score;
                    document.getElementById('balanceScore').value = thisWeekEntry.balance_score;
                    document.getElementById('confidenceScore').value = thisWeekEntry.confidence_score;
                    document.getElementById('weekWins').value = thisWeekEntry.week_wins;
                    document.getElementById('weekChallenges').value = thisWeekEntry.week_challenges;
                    document.getElementById('nextWeekGoals').value = thisWeekEntry.next_week_goals;
                    document.getElementById('weekReflection').value = thisWeekEntry.reflection;
                    
                    // Update displays
                    setupScoreUpdaters();
                    updateOverallScore();
                }
            } catch (error) {
                console.error('Error loading journal data:', error);
            }
        }

        function getWeekStart() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const diff = today.getDate() - dayOfWeek + (dayOfWeek === 0 ? -6 : 1); // Adjust when day is Sunday
            const monday = new Date(today.setDate(diff));
            return monday.toISOString().split('T')[0];
        }

        function viewJournalHistory() {
            try {
                const entries = JSON.parse(localStorage.getItem('mogulmomma_journal_entries') || '[]');
                
                if (entries.length === 0) {
                    alert('ðŸ“– No previous journal entries found.\n\nStart journaling this week to build your history!');
                    return;
                }
                
                // Sort entries by date (newest first)
                entries.sort((a, b) => new Date(b.week_start) - new Date(a.week_start));
                
                // Create history modal
                const historyModal = document.createElement('div');
                historyModal.style.cssText = `
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                    background: rgba(0,0,0,0.8); z-index: 10001; display: flex; 
                    align-items: center; justify-content: center; padding: 20px;
                `;
                
                let historyHTML = `
                    <div style="background: white; border-radius: 20px; padding: 30px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 25px;">
                            <h2 style="color: #1e293b; margin: 0;">ðŸ“– Journal History</h2>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">Ã—</button>
                        </div>
                `;
                
                entries.forEach((entry, index) => {
                    const weekDate = new Date(entry.week_start);
                    const isCurrentWeek = entry.week_start === getWeekStart();
                    const weekLabel = isCurrentWeek ? 'This Week' : `Week of ${weekDate.toLocaleDateString()}`;
                    
                    historyHTML += `
                        <div style="background: ${isCurrentWeek ? '#f0f9ff' : '#f8fafc'}; padding: 20px; border-radius: 12px; margin-bottom: 20px; border-left: 4px solid ${isCurrentWeek ? '#3b82f6' : '#7c3aed'};">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3 style="color: #1e293b; margin: 0;">${weekLabel}</h3>
                                <div style="background: ${isCurrentWeek ? '#3b82f6' : '#7c3aed'}; color: white; padding: 8px 12px; border-radius: 20px; font-size: 1.2rem; font-weight: bold;">
                                    ${entry.overall_score}/10
                                </div>
                            </div>
                            
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin-bottom: 15px;">
                                <div style="text-align: center;">
                                    <div style="font-weight: 600; color: #64748b; font-size: 0.9rem;">ðŸŽ¯ Dream Progress</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #7c3aed;">${entry.career_score}/10</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-weight: 600; color: #64748b; font-size: 0.9rem;">ðŸ“ˆ Skill Expansion</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #10b981;">${entry.growth_score}/10</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-weight: 600; color: #64748b; font-size: 0.9rem;">âš–ï¸ Life Harmony</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #f59e0b;">${entry.balance_score}/10</div>
                                </div>
                                <div style="text-align: center;">
                                    <div style="font-weight: 600; color: #64748b; font-size: 0.9rem;">ðŸš€ Digital Empowerment</div>
                                    <div style="font-size: 1.5rem; font-weight: 700; color: #ef4444;">${entry.confidence_score}/10</div>
                                </div>
                            </div>
                            
                            ${entry.week_wins ? `
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #10b981;">ðŸŽ‰ Wins:</strong>
                                    <div style="color: #64748b; margin-top: 5px;">${entry.week_wins}</div>
                                </div>
                            ` : ''}
                            
                            ${entry.week_challenges ? `
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #ef4444;">âš¡ Challenges:</strong>
                                    <div style="color: #64748b; margin-top: 5px;">${entry.week_challenges}</div>
                                </div>
                            ` : ''}
                            
                            ${entry.next_week_goals ? `
                                <div style="margin-bottom: 12px;">
                                    <strong style="color: #7c3aed;">ðŸŽ¯ Goals:</strong>
                                    <div style="color: #64748b; margin-top: 5px;">${entry.next_week_goals}</div>
                                </div>
                            ` : ''}
                            
                            ${entry.reflection ? `
                                <div>
                                    <strong style="color: #64748b;">ðŸ’­ Reflection:</strong>
                                    <div style="color: #64748b; margin-top: 5px;">${entry.reflection}</div>
                                </div>
                            ` : ''}
                        </div>
                    `;
                });
                
                historyHTML += `
                        <div style="text-align: center; margin-top: 20px;">
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; padding: 12px 25px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;">
                                Close History
                            </button>
                        </div>
                    </div>
                `;
                
                historyModal.innerHTML = historyHTML;
                document.body.appendChild(historyModal);
                document.body.style.overflow = 'hidden';
                
                // Close on background click
                historyModal.addEventListener('click', function(e) {
                    if (e.target === historyModal) {
                        historyModal.remove();
                        document.body.style.overflow = 'auto';
                    }
                });
                
            } catch (error) {
                console.error('Error loading journal history:', error);
                alert('âŒ Error loading journal history. Please try again.');
            }
        }

        // AI Tools Functions
        function openAITool(toolType) {
            const toolData = {
                content: {
                    title: 'âœï¸ Content Generator',
                    description: 'Generate professional content for LinkedIn, blogs, social media and more',
                    placeholder: 'What type of content do you want to create? (e.g., LinkedIn post about career transition, blog intro, etc.)'
                },
                roadmap: {
                    title: 'ðŸ—ºï¸ Roadmap Builder',
                    description: 'Create a step-by-step plan for your career transition',
                    placeholder: 'Describe your current role and your career goal. What transition are you planning?'
                },
                brand: {
                    title: 'ðŸŽ¨ Brand Identity Creator',
                    description: 'Develop your personal brand messaging and positioning',
                    placeholder: 'Tell us about your expertise, target audience, and what makes you unique'
                },
                coach: {
                    title: 'ðŸ’¬ AI Career Coach',
                    description: 'Get personalized career advice and guidance',
                    placeholder: 'What career challenge are you facing? Ask for specific advice or guidance.'
                },
                image: {
                    title: 'ðŸŽ¨ Image Generator',
                    description: 'Create professional images for your brand and content',
                    placeholder: 'Describe the image you want to create (e.g., professional headshot, LinkedIn banner, etc.)'
                }
            };

            const tool = toolData[toolType];
            
            // Create modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0, 0, 0, 0.7); z-index: 10000; backdrop-filter: blur(5px);
                display: flex; align-items: center; justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: white; width: 90%; max-width: 600px; max-height: 90vh; overflow-y: auto; border-radius: 20px; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);">
                    <div style="background: linear-gradient(135deg, #0284c7, #0ea5e9); color: white; padding: 25px; border-radius: 20px 20px 0 0;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h2 style="margin: 0; font-size: 1.5rem;">${tool.title}</h2>
                                <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 0.95rem;">${tool.description}</p>
                            </div>
                            <button onclick="closeAIModal()" style="background: rgba(255, 255, 255, 0.2); border: none; color: white; font-size: 1.5rem; width: 35px; height: 35px; border-radius: 50%; cursor: pointer;">&times;</button>
                        </div>
                    </div>
                    
                    <div style="padding: 30px;">
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 10px;">What would you like to create?</label>
                            <textarea id="aiToolInput" placeholder="${tool.placeholder}" style="width: 100%; min-height: 100px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit;"></textarea>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 10px;">Tone & Style</label>
                            <select id="aiToolTone" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-family: inherit;">
                                <option value="professional">Professional</option>
                                <option value="conversational">Conversational</option>
                                <option value="inspiring">Inspiring</option>
                                <option value="authoritative">Authoritative</option>
                                <option value="friendly">Friendly</option>
                            </select>
                        </div>
                        
                        <div style="display: flex; gap: 15px;">
                            <button onclick="generateAIContent('${toolType}')" style="flex: 1; background: linear-gradient(135deg, #0284c7, #0ea5e9); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer; font-size: 1rem;">
                                âœ¨ Generate Content
                            </button>
                            <button onclick="closeAIModal()" style="background: #e5e7eb; color: #374151; border: none; padding: 15px 25px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                                Cancel
                            </button>
                        </div>
                        
                        <div id="aiToolOutput" style="margin-top: 25px; display: none;">
                            <h3 style="color: #1e293b; margin-bottom: 15px;">Generated Content:</h3>
                            <div id="aiToolResult" style="background: #f8fafc; padding: 20px; border-radius: 10px; border-left: 4px solid #0284c7; white-space: pre-wrap; line-height: 1.6;"></div>
                            <div style="margin-top: 15px; display: flex; gap: 10px;">
                                <button onclick="copyAIResult()" style="background: #10b981; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                                    ðŸ“‹ Copy Content
                                </button>
                                <button onclick="generateAIContent('${toolType}')" style="background: #6366f1; color: white; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                                    ðŸ”„ Generate New
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Focus on input
            setTimeout(() => {
                document.getElementById('aiToolInput').focus();
            }, 100);
        }

        function closeAIModal() {
            const modals = document.querySelectorAll('div[style*="backdrop-filter: blur(5px)"]');
            modals.forEach(modal => {
                if (modal.style.zIndex === '10000') {
                    document.body.removeChild(modal);
                }
            });
            document.body.style.overflow = 'auto';
        }

        function generateAIContent(toolType) {
            const input = document.getElementById('aiToolInput').value;
            const tone = document.getElementById('aiToolTone').value;
            const output = document.getElementById('aiToolOutput');
            const result = document.getElementById('aiToolResult');
            
            if (!input.trim()) {
                alert('Please enter your request first!');
                return;
            }
            
            // Show loading
            result.textContent = 'Generating your content... This may take a moment.';
            output.style.display = 'block';
            
            // Simulate AI generation (in production, this would call your AI API)
            setTimeout(() => {
                const generatedContent = simulateAIGeneration(toolType, input, tone);
                result.textContent = generatedContent;
            }, 2000);
        }

        function simulateAIGeneration(toolType, input, tone) {
            const samples = {
                content: `ðŸš€ Ready to make your next career move? 

After ${tone === 'professional' ? '15+ years in corporate leadership' : 'years of building expertise'}, I've learned that the biggest career transitions happen when you stop waiting for permission and start creating your own opportunities.

${input.includes('LinkedIn') ? 'Here are 3 strategies that transformed my approach:' : 'Key insights from my journey:'}

âœ¨ Your experience isn't starting overâ€”it's your competitive advantage
ðŸ’ª The skills that got you here can take you anywhere
ðŸŽ¯ Clarity beats perfection every time

What's one bold step you're taking toward your dream role this week?

#CareerTransition #Leadership #MogulMomma`,

                roadmap: `ðŸ—ºï¸ Your Career Transition Roadmap

Based on your goal: "${input}"

PHASE 1: Foundation (Weeks 1-4)
â€¢ Clarify your vision and target role
â€¢ Audit your current skills vs. required skills
â€¢ Update LinkedIn profile and resume
â€¢ Research 10 companies in your target industry

PHASE 2: Building (Weeks 5-8)  
â€¢ Network with 5 people in your target field
â€¢ Complete 1-2 relevant skill-building courses
â€¢ Start creating content in your new area
â€¢ Apply to 3-5 strategic positions

PHASE 3: Acceleration (Weeks 9-12)
â€¢ Increase networking to 10+ conversations
â€¢ Secure informational interviews
â€¢ Negotiate transition timeline if switching internally
â€¢ Prepare for interviews with portfolio examples

Success Metrics:
âœ… 20+ quality networking connections
âœ… 3+ informational interviews completed  
âœ… 1-2 concrete opportunities in pipeline
âœ… Clear 90-day action plan for new role`,

                brand: `ðŸŽ¨ Your Personal Brand Blueprint

Based on: "${input}"

BRAND POSITIONING:
"The ${tone} leader who transforms [your industry] through [your unique approach]"

CORE MESSAGE:
I help accomplished professionals navigate career transitions with confidence, leveraging proven strategies and deep industry expertise.

KEY PILLARS:
ðŸŽ¯ Expertise: 15+ years of leadership experience
ðŸ’¡ Innovation: Fresh perspectives on traditional challenges  
ðŸ¤ Connection: Building authentic professional relationships
ðŸ“ˆ Results: Measurable impact and transformation

CONTENT THEMES:
â€¢ Career transition strategies
â€¢ Leadership insights
â€¢ Industry trends and analysis
â€¢ Personal growth and development
â€¢ Success stories and case studies

VOICE & TONE:
${tone.charAt(0).toUpperCase() + tone.slice(1)}, knowledgeable, approachable, actionable

CALL-TO-ACTION:
"Ready to accelerate your career transition? Let's connect and explore how I can help you achieve your professional goals."`,

                coach: `ðŸ’¬ Career Coach Guidance

Your Question: "${input}"

Here's my personalized advice:

ðŸŽ¯ IMMEDIATE ACTION:
The first step is to get crystal clear on what you want. Write down exactly what your ideal role looks like - not just the title, but the daily responsibilities, company culture, and impact you want to make.

ðŸ’ª STRATEGIC APPROACH:
1. Leverage your existing network - 70% of jobs are never posted publicly
2. Focus on building relationships before you need them
3. Position yourself as a thought leader in your target area

âš¡ QUICK WINS:
â€¢ Update your LinkedIn headline to reflect your target role
â€¢ Join 2-3 industry groups and engage actively
â€¢ Schedule coffee chats with 2 people this week
â€¢ Start sharing insights relevant to your new direction

ðŸš¨ COMMON PITFALL TO AVOID:
Don't wait until you feel 100% ready. Start building your presence in your target field now, even while in your current role.

NEXT STEP:
Choose ONE action from the quick wins list and complete it within 48 hours. Momentum builds confidence, and confidence attracts opportunities.

Remember: Your transition isn't about starting overâ€”it's about stepping into who you were always meant to become.`,

                image: `ðŸŽ¨ Image Generation Request Received

Your Request: "${input}"

For optimal results, we recommend:

STYLE: Professional, modern, clean
COLORS: Blues and whites for trust, or purple/pink gradient for MogulMomma brand
COMPOSITION: Clean, uncluttered, high-impact

SUGGESTION:
For professional headshots: Natural lighting, solid background, confident pose
For LinkedIn banners: Include your value proposition text overlay
For social media: Consistent brand colors and fonts

This would connect to our AI image generator for actual creation. 

Would you like to proceed with generating this image?`
            };
            
            return samples[toolType] || 'Content generated successfully! This is a demo - in production, this would connect to actual AI APIs.';
        }

        function copyAIResult() {
            const result = document.getElementById('aiToolResult');
            navigator.clipboard.writeText(result.textContent).then(() => {
                alert('âœ… Content copied to clipboard!');
            }).catch(() => {
                alert('Please manually copy the content above.');
            });
        }

        // Affiliate Center Functions
        function openAffiliateTracker() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            // Get user's affiliate code or use demo
            const affiliateCode = localStorage.getItem('mogulmomma_affiliate_code') || 'SARAH123';
            const totalEarnings = localStorage.getItem('affiliate_total_earnings') || '485.50';
            const monthlyEarnings = localStorage.getItem('affiliate_monthly_earnings') || '145.50';
            const referralCount = localStorage.getItem('affiliate_referrals') || '10';
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">ðŸ“Š My Affiliate Dashboard</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">Ã—</button>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="color: #92400e; font-weight: 600; text-align: center;">Your Affiliate Code: ${affiliateCode}</div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div style="background: #f8fafc; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #10b981;">$${totalEarnings}</div>
                            <div style="color: #64748b; font-size: 14px;">Total Earned</div>
                        </div>
                        <div style="background: #f8fafc; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #7c3aed;">$${monthlyEarnings}</div>
                            <div style="color: #64748b; font-size: 14px;">This Month</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div style="background: #f8fafc; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #f59e0b;">${referralCount}</div>
                            <div style="color: #64748b; font-size: 14px;">Total Referrals</div>
                        </div>
                        <div style="background: #f8fafc; padding: 15px; border-radius: 10px; text-align: center;">
                            <div style="font-size: 24px; font-weight: bold; color: #ef4444;">$48.50</div>
                            <div style="color: #64748b; font-size: 14px;">Per Referral</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <a href="/affiliate" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; padding: 12px 25px; border-radius: 25px; text-decoration: none; font-weight: 600; display: inline-block;">View Full Dashboard</a>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function openAffiliateLinks() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            const affiliateCode = localStorage.getItem('mogulmomma_affiliate_code') || 'SARAH123';
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">ðŸ”— My Affiliate Links</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">Ã—</button>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #7c3aed; margin-bottom: 10px;">Main Landing Page</h4>
                        <div style="background: #f8fafc; padding: 12px; border-radius: 8px; font-family: monospace; font-size: 14px; border: 1px solid #e2e8f0; position: relative;">
                            https://mogulmomma.com?ref=${affiliateCode}
                            <button onclick="navigator.clipboard.writeText('https://mogulmomma.com?ref=${affiliateCode}').then(() => alert('âœ… Link copied!'))" style="position: absolute; right: 8px; top: 8px; background: #7c3aed; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">Copy</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #7c3aed; margin-bottom: 10px;">Membership Page</h4>
                        <div style="background: #f8fafc; padding: 12px; border-radius: 8px; font-family: monospace; font-size: 14px; border: 1px solid #e2e8f0; position: relative;">
                            https://mogulmomma.com/mogulmomma-membership.html?ref=${affiliateCode}
                            <button onclick="navigator.clipboard.writeText('https://mogulmomma.com/mogulmomma-membership.html?ref=${affiliateCode}').then(() => alert('âœ… Link copied!'))" style="position: absolute; right: 8px; top: 8px; background: #7c3aed; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">Copy</button>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #7c3aed; margin-bottom: 10px;">Assessment Page</h4>
                        <div style="background: #f8fafc; padding: 12px; border-radius: 8px; font-family: monospace; font-size: 14px; border: 1px solid #e2e8f0; position: relative;">
                            https://mogulmomma.com/mogul-mama-assessment.html?ref=${affiliateCode}
                            <button onclick="navigator.clipboard.writeText('https://mogulmomma.com/mogul-mama-assessment.html?ref=${affiliateCode}').then(() => alert('âœ… Link copied!'))" style="position: absolute; right: 8px; top: 8px; background: #7c3aed; color: white; border: none; padding: 4px 8px; border-radius: 4px; font-size: 12px; cursor: pointer;">Copy</button>
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 15px; border-radius: 12px; margin-top: 20px;">
                        <div style="color: #92400e; font-weight: 600; margin-bottom: 8px;">ðŸ’¡ Sharing Tips</div>
                        <div style="color: #92400e; font-size: 14px;">
                            â€¢ Share in relevant Facebook groups<br>
                            â€¢ Include in your email signature<br>
                            â€¢ Share with friends considering a career change<br>
                            â€¢ Post on LinkedIn with your story
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function openAffiliateSharing() {
            const affiliateCode = localStorage.getItem('mogulmomma_affiliate_code') || 'SARAH123';
            const shareText = `ðŸš€ I found an amazing community for accomplished women ready to transform their careers! 
            
âœ¨ MogulMomma has AI-powered tools, expert guidance, and a supportive community of ambitious women.

If you're ready to turn your dreams into reality, check it out: https://mogulmomma.com?ref=${affiliateCode}

#CareerTransition #WomenInBusiness #DreamMapping #MogulMomma`;

            if (navigator.share) {
                navigator.share({
                    title: 'MogulMomma - Transform Your Dreams Into Reality',
                    text: shareText,
                    url: `https://mogulmomma.com?ref=${affiliateCode}`
                }).catch(console.error);
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('âœ… Affiliate message copied to clipboard! Paste it wherever you want to share.');
                }).catch(() => {
                    alert(`ðŸ“± Quick Share Message:

${shareText}

Copy this message to share with your network!`);
                });
            }
        }

        // Member Connection Functions
        function connectWithMember(memberName, memberTitle, actionType, allowsEmail = true) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            const isMessage = actionType === 'message';
            const actionText = isMessage ? 'Send Message' : 'Send Connection Request';
            const headerText = isMessage ? 'ðŸ’¬ Send Message' : 'ðŸ¤ Connect';
            const placeholderText = isMessage ? 
                'Hi! I saw your post about... I\'d love to connect and learn more about...' :
                'Hi! I\'d love to connect with you. I\'m interested in...';
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">${headerText}</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">Ã—</button>
                    </div>
                    
                    <div style="display: flex; align-items: center; gap: 15px; padding: 20px; background: #f8fafc; border-radius: 12px; margin-bottom: 20px;">
                        <div style="width: 50px; height: 50px; border-radius: 50%; background: linear-gradient(135deg, #7c3aed, #c084fc); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 1.2rem;">
                            ${memberName.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div>
                            <div style="font-weight: 700; color: #1e293b; font-size: 1.1rem;">${memberName}</div>
                            <div style="color: #64748b; font-size: 0.9rem;">${memberTitle}</div>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">Your Message</label>
                        <textarea id="connectionMessage" placeholder="${placeholderText}" style="width: 100%; min-height: 120px; padding: 15px; border: 2px solid #e5e7eb; border-radius: 10px; resize: vertical; font-family: inherit; font-size: 0.9rem;"></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 10px;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex: 1; background: #e5e7eb; color: #374151; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                            Cancel
                        </button>
                        <button onclick="sendConnectionRequest('${memberName}', '${actionType}', ${allowsEmail})" style="flex: 2; background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                            ${actionText}
                        </button>
                    </div>
                    
                    ${!allowsEmail ? `
                        <div style="margin-top: 15px; padding: 12px; background: #fef2f2; border-radius: 8px; border-left: 4px solid #ef4444;">
                            <div style="font-size: 0.85rem; color: #991b1b;">
                                <strong>ðŸ“§ Email Privacy:</strong> ${memberName} has opted out of email notifications. Your message will be sent via the platform only.
                            </div>
                        </div>
                    ` : `
                        <div style="margin-top: 15px; padding: 12px; background: #fef3c7; border-radius: 8px; border-left: 4px solid #f59e0b;">
                            <div style="font-size: 0.85rem; color: #92400e;">
                                <strong>ðŸ’¡ Tip:</strong> Personalized messages get better responses! Mention something specific about their background or posts.
                            </div>
                        </div>
                    `}
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Focus on textarea
            setTimeout(() => {
                document.getElementById('connectionMessage').focus();
            }, 100);
            
            // Close on background click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function sendConnectionRequest(memberName, actionType, allowsEmail = true) {
            const message = document.getElementById('connectionMessage').value.trim();
            
            if (!message) {
                alert('Please write a message before sending.');
                return;
            }
            
            // Close the modal
            document.querySelector('[style*="position: fixed"]').remove();
            document.body.style.overflow = 'auto';
            
            // Simulate sending (in production, this would call your backend)
            const actionText = actionType === 'message' ? 'message' : 'connection request';
            
            // Show success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10001;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                animation: slideIn 0.3s ease;
                max-width: 300px;
            `;
            
            const notificationMethod = allowsEmail ? 'email and platform notification' : 'platform notification only';
            
            notification.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px;">âœ… ${actionText === 'message' ? 'Message' : 'Connection request'} sent!</div>
                <div style="font-size: 0.9rem; opacity: 0.9;">Your ${actionText} to ${memberName} has been sent via ${notificationMethod}.</div>
                ${!allowsEmail ? `<div style="font-size: 0.8rem; opacity: 0.8; margin-top: 3px;">ðŸ“§ ${memberName} has opted out of email notifications.</div>` : ''}
            `;
            
            document.body.appendChild(notification);
            
            // Auto-remove notification after 4 seconds
            setTimeout(() => {
                notification.remove();
            }, 4000);
            
            // In production, you would:
            // 1. Save the connection request to your database
            // 2. Send email notification to the target member
            // 3. Add to user's "pending connections" list
            // 4. Update UI to show "Request Sent" on the button
            
            console.log(`${actionText} sent to ${memberName}: ${message}`);
        }

        // Obstacle Assessment and Support Functions
        function openObstacleAssessment() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 700px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="display: inline-block; margin-right: 8px; vertical-align: middle;"><path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" stroke="#ef4444" stroke-width="2"/></svg>What's Holding You Back This Week?</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">&times;</button>
                    </div>
                    
                    <p style="color: #64748b; margin-bottom: 25px; line-height: 1.6;">Every accomplished woman faces obstacles on her dream mapping journey. Let's identify what's stopping you and create a personalized action plan to break through.</p>
                    
                    <div style="margin-bottom: 25px;">
                        <h3 style="color: #1e293b; margin-bottom: 15px; font-size: 1.1rem;">Select your biggest obstacles this week:</h3>
                        <div style="display: grid; gap: 12px;">
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="time" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">â° Time Constraints</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"I don't have enough time to work on my dreams"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="clarity" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸŽ¯ Lack of Clarity</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"I'm not sure exactly what I want or how to get there"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="fear" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸ˜° Fear & Self-Doubt</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"What if I fail? Am I too old/inexperienced?"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="financial" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸ’° Financial Concerns</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"I can't afford to take risks or invest in my dreams"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="support" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸ‘¥ Lack of Support</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"People around me don't understand or support my goals"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="overwhelm" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸŒŠ Feeling Overwhelmed</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"There's so much to do, I don't know where to start"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="energy" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸ”‹ Low Energy/Motivation</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"I'm burnt out and don't have the energy to pursue this"</div>
                                </div>
                            </label>
                            <label style="display: flex; align-items: center; gap: 12px; padding: 15px; border: 2px solid #f1f5f9; border-radius: 10px; cursor: pointer; transition: all 0.3s ease;" class="obstacle-option">
                                <input type="checkbox" value="skills" style="width: 18px; height: 18px;">
                                <div>
                                    <div style="font-weight: 600; color: #1e293b;">ðŸŽ“ Missing Skills/Knowledge</div>
                                    <div style="font-size: 0.9rem; color: #64748b;">"I don't have the skills or knowledge I need yet"</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 25px;">
                        <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">Additional details (optional):</label>
                        <textarea id="obstacleDetails" placeholder="Is there anything specific about your situation that would help us provide better guidance?" style="width: 100%; min-height: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; resize: vertical; font-family: inherit;"></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: #e5e7eb; color: #374151; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            Cancel
                        </button>
                        <button onclick="processObstacleAssessment()" style="background: linear-gradient(135deg, #ef4444, #dc2626); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            ðŸ’ª Get My Action Plan
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Add click handlers for obstacle options
            modal.querySelectorAll('.obstacle-option').forEach(option => {
                option.addEventListener('click', function(e) {
                    if (e.target !== this.querySelector('input')) {
                        const checkbox = this.querySelector('input');
                        checkbox.checked = !checkbox.checked;
                    }
                    
                    if (this.querySelector('input').checked) {
                        this.style.borderColor = '#ef4444';
                        this.style.background = '#fef2f2';
                    } else {
                        this.style.borderColor = '#f1f5f9';
                        this.style.background = 'white';
                    }
                });
            });
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        function processObstacleAssessment() {
            const selectedObstacles = [];
            const checkboxes = document.querySelectorAll('.obstacle-option input:checked');
            
            checkboxes.forEach(checkbox => {
                selectedObstacles.push(checkbox.value);
            });
            
            if (selectedObstacles.length === 0) {
                alert('Please select at least one obstacle to get personalized solutions.');
                return;
            }
            
            const details = document.getElementById('obstacleDetails').value;
            
            // Save the assessment
            const assessment = {
                obstacles: selectedObstacles,
                details: details,
                date: new Date().toISOString(),
                id: Date.now()
            };
            
            let assessments = JSON.parse(localStorage.getItem('mogulmomma_obstacle_assessments') || '[]');
            assessments.push(assessment);
            localStorage.setItem('mogulmomma_obstacle_assessments', JSON.stringify(assessments));
            
            // Close current modal
            document.querySelector('[style*="position: fixed"]').remove();
            document.body.style.overflow = 'auto';
            
            // Show solutions and send email report
            showObstacleSolutions(selectedObstacles, details);
            sendObstacleReportEmail(selectedObstacles, details);
        }
        
        function showObstacleSolutions(obstacles, details) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            const solutions = generateObstacleSolutions(obstacles);
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">ðŸ’ª Your Personalized Action Plan</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">&times;</button>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 20px; border-radius: 12px; margin-bottom: 25px; text-align: center;">
                        <h3 style="color: #92400e; margin-bottom: 10px;">ðŸŽ¯ You've identified ${obstacles.length} key obstacle${obstacles.length > 1 ? 's' : ''}</h3>
                        <p style="color: #92400e; font-size: 0.9rem;">Here's your step-by-step plan to break through and move forward with your dreams!</p>
                    </div>
                    
                    ${solutions}
                    
                    <div style="background: #f0f9ff; padding: 20px; border-radius: 12px; margin-bottom: 25px;">
                        <h4 style="color: #1e293b; margin-bottom: 15px;">ðŸš€ This Week's Challenge</h4>
                        <p style="color: #64748b; margin-bottom: 15px;">Pick ONE action from above and commit to doing it this week. Small steps lead to big breakthroughs!</p>
                        <button onclick="commitToAction()" style="background: #3b82f6; color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; margin-right: 10px;">
                            âœ‹ I Commit to Taking Action
                        </button>
                        <button onclick="shareWithCommunity()" style="background: #10b981; color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            ðŸ‘¥ Share with Community
                        </button>
                    </div>
                    
                    <div style="text-align: center;">
                        <button onclick="scheduleFollowUp()" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 15px 25px; border-radius: 10px; font-weight: 600; cursor: pointer; margin-right: 10px;">
                            ðŸ“… Schedule Follow-up Check-in
                        </button>
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: #e5e7eb; color: #374151; border: none; padding: 15px 25px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                            Close
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        function generateObstacleSolutions(obstacles) {
            const solutionMap = {
                time: {
                    title: 'â° Time Management Solutions',
                    actions: [
                        'Schedule 15 minutes daily for dream planning (even 15 min counts!)',
                        'Use your commute or lunch break for learning/networking',
                        'Audit your time for one day - identify where minutes are being lost',
                        'Try time-blocking: assign specific times for specific dream-related tasks'
                    ],
                    resources: 'Free Resource: Download our "15-Minute Dream Builder" daily planner'
                },
                clarity: {
                    title: 'ðŸŽ¯ Clarity Building Solutions',
                    actions: [
                        'Complete our Dream Discovery Worksheet (takes 20 minutes)',
                        'Interview 3 people doing what you think you want to do',
                        'Try a "clarity challenge": spend 1 week researching your interest deeply',
                        'Book a 30-minute clarity coaching session with our team'
                    ],
                    resources: 'Tool: Use our AI Career Coach to explore different paths'
                },
                fear: {
                    title: 'ðŸ˜° Fear & Confidence Building Solutions',
                    actions: [
                        'Start with one tiny step this week (research, make one call, send one email)',
                        'Join our "Fear Busters" accountability group',
                        'Write down your worst-case scenario - then create a plan for it',
                        'Find 3 women who made similar transitions and study their stories'
                    ],
                    resources: 'Support: Access our "Confidence Building" video series'
                },
                financial: {
                    title: 'ðŸ’° Financial Security Solutions',
                    actions: [
                        'Create a transition budget - how long can you survive with savings?',
                        'Start your new venture as a side hustle before quitting',
                        'Research grants, scholarships, or low-cost education options',
                        'Find 2-3 ways to reduce expenses to create more financial cushion'
                    ],
                    resources: 'Guide: "The Smart Woman\'s Guide to Career Transition Finances"'
                },
                support: {
                    title: 'ðŸ‘¥ Building Your Support Network',
                    actions: [
                        'Connect with 2 new MogulMomma community members this week',
                        'Find one online community or local meetup related to your goal',
                        'Have an honest conversation with family about your dreams and needs',
                        'Identify one person who could be a mentor or accountability partner'
                    ],
                    resources: 'Community: Join our weekly "Dream Builder" support calls'
                },
                overwhelm: {
                    title: 'ðŸŒŠ Overwhelm Management Solutions',
                    actions: [
                        'Choose ONLY ONE goal to focus on this month',
                        'Break your big goal into 5 smaller steps',
                        'Use the "Two-Minute Rule": if it takes less than 2 minutes, do it now',
                        'Practice saying "no" to commitments that don\'t serve your dreams'
                    ],
                    resources: 'Framework: Get our "Dream Prioritization Matrix" template'
                },
                energy: {
                    title: 'ðŸ”‹ Energy & Motivation Boosters',
                    actions: [
                        'Identify your peak energy time and protect it for dream work',
                        'Start a "wins journal" - write down 3 small victories daily',
                        'Connect with other motivated women in our community',
                        'Take care of basics: improve sleep, nutrition, or add 10 min of movement'
                    ],
                    resources: 'Assessment: Take our "Energy Audit" to find your optimal schedule'
                },
                skills: {
                    title: 'ðŸŽ“ Skill Building Solutions',
                    actions: [
                        'Identify the TOP 3 skills you need and focus on one first',
                        'Find free online courses (Coursera, YouTube, LinkedIn Learning)',
                        'Offer to volunteer or shadow someone to learn while doing',
                        'Join professional associations in your target field'
                    ],
                    resources: 'Library: Access our curated skill-building resource database'
                }
            };
            
            let solutionsHTML = '';
            
            obstacles.forEach(obstacle => {
                const solution = solutionMap[obstacle];
                if (solution) {
                    solutionsHTML += `
                        <div style="margin-bottom: 25px; border: 2px solid #f1f5f9; border-radius: 12px; padding: 20px;">
                            <h3 style="color: #1e293b; margin-bottom: 15px; font-size: 1.1rem;">${solution.title}</h3>
                            <div style="margin-bottom: 15px;">
                                <h4 style="color: #374151; margin-bottom: 10px; font-size: 1rem;">Action Steps:</h4>
                                <ul style="color: #64748b; line-height: 1.6; margin-left: 20px;">
                                    ${solution.actions.map(action => `<li style="margin-bottom: 5px;">${action}</li>`).join('')}
                                </ul>
                            </div>
                            <div style="background: #f8fafc; padding: 12px; border-radius: 8px; border-left: 4px solid #7c3aed;">
                                <strong style="color: #7c3aed;">ðŸ’¡ ${solution.resources}</strong>
                            </div>
                        </div>
                    `;
                }
            });
            
            return solutionsHTML;
        }
        
        function viewObstacleSolutions() {
            const assessments = JSON.parse(localStorage.getItem('mogulmomma_obstacle_assessments') || '[]');
            
            if (assessments.length === 0) {
                alert('You haven\'t completed an obstacle assessment yet. Take the assessment first to get personalized solutions!');
                openObstacleAssessment();
                return;
            }
            
            const latestAssessment = assessments[assessments.length - 1];
            showObstacleSolutions(latestAssessment.obstacles, latestAssessment.details);
        }
        
        function shareObstacleWin() {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 600px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">ðŸŽ‰ Share Your Breakthrough!</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">&times;</button>
                    </div>
                    
                    <p style="color: #64748b; margin-bottom: 20px;">Celebrating wins motivates you and inspires other women! Share how you overcame an obstacle this week.</p>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">What obstacle did you overcome?</label>
                        <select id="obstacleType" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 1rem;">
                            <option value="time">Time management challenge</option>
                            <option value="fear">Fear or self-doubt</option>
                            <option value="clarity">Lack of clarity or direction</option>
                            <option value="skills">Skills or knowledge gap</option>
                            <option value="financial">Financial concern</option>
                            <option value="support">Lack of support</option>
                            <option value="energy">Low energy or motivation</option>
                            <option value="other">Other obstacle</option>
                        </select>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">Tell us about your win!</label>
                        <textarea id="obstacleWin" placeholder="Example: 'I was afraid to reach out to potential mentors, but this week I sent 3 LinkedIn messages and got 2 positive responses! Taking that first small step made all the difference.'" style="width: 100%; min-height: 100px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; resize: vertical; font-family: inherit;"></textarea>
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">What advice would you give other women facing this obstacle?</label>
                        <textarea id="obstacleAdvice" placeholder="Your wisdom could help another woman break through..." style="width: 100%; min-height: 80px; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px; resize: vertical; font-family: inherit;"></textarea>
                    </div>
                    
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: #e5e7eb; color: #374151; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            Cancel
                        </button>
                        <button onclick="submitObstacleWin()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 12px 25px; border-radius: 8px; font-weight: 600; cursor: pointer;">
                            ðŸŽ‰ Share My Win
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        function submitObstacleWin() {
            const obstacleType = document.getElementById('obstacleType').value;
            const win = document.getElementById('obstacleWin').value.trim();
            const advice = document.getElementById('obstacleAdvice').value.trim();
            
            if (!win) {
                alert('Please share your win story!');
                return;
            }
            
            // Save the win
            const obstacleWin = {
                type: obstacleType,
                story: win,
                advice: advice,
                date: new Date().toISOString(),
                author: 'You' // In production, this would be the user's name
            };
            
            let wins = JSON.parse(localStorage.getItem('mogulmomma_obstacle_wins') || '[]');
            wins.push(obstacleWin);
            localStorage.setItem('mogulmomma_obstacle_wins', JSON.stringify(wins));
            
            // Close modal
            document.querySelector('[style*="position: fixed"]').remove();
            document.body.style.overflow = 'auto';
            
            // Show success
            alert('ðŸŽ‰ Thank you for sharing your win! Your story will inspire other women in the community.');
            
            // In production, this would create a community post
            console.log('Obstacle win shared:', obstacleWin);
        }
        
        function commitToAction() {
            const commitment = prompt('What specific action will you commit to taking this week?\n\nBe specific (e.g., "I will spend 30 minutes on Tuesday researching online courses" or "I will send 2 LinkedIn connection requests by Friday")');
            
            if (commitment && commitment.trim()) {
                const commitmentData = {
                    action: commitment.trim(),
                    date: new Date().toISOString(),
                    completed: false
                };
                
                let commitments = JSON.parse(localStorage.getItem('mogulmomma_commitments') || '[]');
                commitments.push(commitmentData);
                localStorage.setItem('mogulmomma_commitments', JSON.stringify(commitments));
                
                alert('ðŸ’ª Amazing! Your commitment has been saved. We\'ll check in with you next week to celebrate your progress!');
            }
        }
        
        function shareWithCommunity() {
            // Close current modal
            document.querySelector('[style*="position: fixed"]').remove();
            document.body.style.overflow = 'auto';
            
            // Auto-fill the post composer
            const postInput = document.getElementById('post-input');
            if (postInput) {
                postInput.value = 'ðŸ’ª ACCOUNTABILITY POST: I just identified what\'s been holding me back and created an action plan to break through! This week I\'m committing to [specific action]. Who else is ready to tackle their obstacles head-on? #ObstacleBreakthrough #MogulMommaAccountability';
                postInput.focus();
                
                // Enable share button
                const shareBtn = document.getElementById('share-btn');
                if (shareBtn) {
                    shareBtn.disabled = false;
                    shareBtn.style.opacity = '1';
                }
                
                // Scroll to post composer
                postInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }
        
        function scheduleFollowUp() {
            alert('ðŸ“… Great idea! A follow-up reminder has been set for next week. We\'ll check in to see how your action plan is going and celebrate your progress!');
            
            // In production, this would integrate with a calendar or reminder system
            const reminder = {
                type: 'obstacle_followup',
                date: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString(), // 1 week from now
                message: 'How did your obstacle breakthrough action plan go this week?'
            };
            
            let reminders = JSON.parse(localStorage.getItem('mogulmomma_reminders') || '[]');
            reminders.push(reminder);
            localStorage.setItem('mogulmomma_reminders', JSON.stringify(reminders));
        }
        
        function sendObstacleReportEmail(obstacles, details) {
            // Get user's email (in production, this would come from user profile)
            const userEmail = localStorage.getItem('mogulmomma_user_email') || prompt('Enter your email to receive your obstacle breakthrough report:');
            
            if (!userEmail) {
                console.log('No email provided, skipping email report');
                return;
            }
            
            // Save email for future use
            localStorage.setItem('mogulmomma_user_email', userEmail);
            
            // Generate HTML report
            const htmlReport = generateObstacleReportHTML(obstacles, details);
            
            // Check if MogulMommaEmail is available
            if (typeof MogulMommaEmail !== 'undefined') {
                // Use the optimized email helper
                const emailParams = {
                    to_email: userEmail,
                    subject: 'Your Obstacle Breakthrough Action Plan - MogulMomma',
                    message: htmlReport,
                    from_name: 'MogulMomma Team'
                };
                
                MogulMommaEmail.sendTestEmail(emailParams)
                    .then(function(response) {
                        console.log('Obstacle report email sent successfully:', response);
                        showEmailSuccessNotification(userEmail);
                    })
                    .catch(function(error) {
                        console.error('Failed to send obstacle report email:', error);
                        showEmailErrorNotification();
                    });
            } else {
                // Fallback to direct EmailJS
                console.warn('MogulMommaEmail not available, using direct EmailJS');
                
                // Initialize EmailJS if not already done
                if (typeof emailjs !== 'undefined') {
                    emailjs.init({
                        publicKey: "SAU17WFhPmeQLrng7",
                    });
                    
                    const emailParams = {
                        to_email: userEmail,
                        subject: 'Your Obstacle Breakthrough Action Plan - MogulMomma',
                        message: htmlReport,
                        from_name: 'MogulMomma Team'
                    };
                    
                    emailjs.send('service_vntq4ai', 'template_tcyaiym', emailParams)
                        .then(function(response) {
                            console.log('Obstacle report email sent successfully:', response);
                            showEmailSuccessNotification(userEmail);
                        })
                        .catch(function(error) {
                            console.error('Failed to send obstacle report email:', error);
                            showEmailErrorNotification();
                        });
                } else {
                    console.error('EmailJS not available');
                    showEmailErrorNotification();
                }
            }
        }
        
        function generateObstacleReportHTML(obstacles, details) {
            const date = new Date().toLocaleDateString('en-US', { 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            
            const obstacleNames = {
                time: 'Time Constraints',
                clarity: 'Lack of Clarity',
                fear: 'Fear & Self-Doubt',
                financial: 'Financial Concerns',
                support: 'Lack of Support',
                overwhelm: 'Feeling Overwhelmed',
                energy: 'Low Energy/Motivation',
                skills: 'Missing Skills/Knowledge'
            };
            
            const solutions = generateObstacleSolutionsForEmail(obstacles);
            
            return `
<!DOCTYPE html>
<html>
<head>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; }
        .header { background: linear-gradient(135deg, #7c3aed, #f472b6); color: white; padding: 30px; text-align: center; border-radius: 10px 10px 0 0; }
        .content { padding: 30px; background: white; }
        .obstacle { background: #f8fafc; padding: 20px; margin: 15px 0; border-radius: 8px; border-left: 4px solid #ef4444; }
        .solution { background: #f0f9ff; padding: 15px; margin: 10px 0; border-radius: 8px; }
        .action-list { list-style: none; padding: 0; }
        .action-list li { padding: 8px 0; border-bottom: 1px solid #e5e7eb; }
        .action-list li:last-child { border-bottom: none; }
        .footer { background: #f8fafc; padding: 20px; text-align: center; color: #64748b; border-radius: 0 0 10px 10px; }
        .highlight { background: linear-gradient(135deg, #fef3c7, #fbbf24); padding: 15px; border-radius: 8px; margin: 15px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ðŸ’ª Your Obstacle Breakthrough Report</h1>
        <p>Generated on ${date}</p>
    </div>
    
    <div class="content">
        <div class="highlight">
            <h2>ðŸŽ¯ You identified ${obstacles.length} key obstacle${obstacles.length > 1 ? 's' : ''}</h2>
            <p>Congratulations on taking this important step toward your dreams! Below is your personalized action plan.</p>
        </div>
        
        <h3>ðŸ“‹ Your Identified Obstacles:</h3>
        <ul>
            ${obstacles.map(obstacle => `<li><strong>${obstacleNames[obstacle] || obstacle}</strong></li>`).join('')}
        </ul>
        
        ${details ? `<div class="obstacle">
            <h4>ðŸ“ Additional Details You Provided:</h4>
            <p>${details}</p>
        </div>` : ''}
        
        <h3>ðŸš€ Your Personalized Action Plan:</h3>
        ${solutions}
        
        <div class="highlight">
            <h3>ðŸ“… This Week's Challenge</h3>
            <p>Pick ONE action from your plan above and commit to doing it this week. Small steps lead to big breakthroughs!</p>
            <p><strong>Remember:</strong> You already have everything within you to succeed. This obstacle assessment is just the beginning of your breakthrough journey.</p>
        </div>
        
        <h3>ðŸ¤ Need Support?</h3>
        <ul>
            <li>Join our community discussions at <a href="https://mogulmomma.com/community">mogulmomma.com/community</a></li>
            <li>Connect with other women facing similar challenges</li>
            <li>Share your wins and celebrate progress together</li>
            <li>Reply to this email if you need additional guidance</li>
        </ul>
    </div>
    
    <div class="footer">
        <p><strong>You've got this! ðŸ’œ</strong></p>
        <p>The MogulMomma Team</p>
        <p><a href="https://mogulmomma.com">mogulmomma.com</a> | <a href="mailto:support@mogulmomma.com">support@mogulmomma.com</a></p>
    </div>
</body>
</html>
            `;
        }
        
        function generateObstacleSolutionsForEmail(obstacles) {
            const solutionMap = {
                time: {
                    title: 'â° Time Management Solutions',
                    actions: [
                        'Schedule 15 minutes daily for dream planning',
                        'Use commute or lunch break for learning/networking',
                        'Audit your time for one day to identify lost minutes',
                        'Try time-blocking for specific dream-related tasks'
                    ]
                },
                clarity: {
                    title: 'ðŸŽ¯ Clarity Building Solutions',
                    actions: [
                        'Complete our Dream Discovery Worksheet (20 minutes)',
                        'Interview 3 people doing what you want to do',
                        'Spend 1 week deeply researching your interest',
                        'Book a clarity coaching session'
                    ]
                },
                fear: {
                    title: 'ðŸ˜° Fear & Confidence Building',
                    actions: [
                        'Take one tiny step this week (research, call, email)',
                        'Write down worst-case scenario and create a plan',
                        'Find 3 women who made similar transitions',
                        'Join our Fear Busters accountability group'
                    ]
                },
                financial: {
                    title: 'ðŸ’° Financial Security Solutions',
                    actions: [
                        'Create a transition budget with your savings timeline',
                        'Start your venture as a side hustle first',
                        'Research grants and low-cost education options',
                        'Find 2-3 ways to reduce expenses'
                    ]
                },
                support: {
                    title: 'ðŸ‘¥ Building Your Support Network',
                    actions: [
                        'Connect with 2 new MogulMomma members this week',
                        'Find online communities related to your goal',
                        'Have honest conversation with family about your dreams',
                        'Identify a potential mentor or accountability partner'
                    ]
                },
                overwhelm: {
                    title: 'ðŸŒŠ Overwhelm Management',
                    actions: [
                        'Choose ONLY ONE goal to focus on this month',
                        'Break your big goal into 5 smaller steps',
                        'Use the Two-Minute Rule for quick tasks',
                        'Practice saying no to non-essential commitments'
                    ]
                },
                energy: {
                    title: 'ðŸ”‹ Energy & Motivation Boosters',
                    actions: [
                        'Identify and protect your peak energy time',
                        'Start a wins journal - 3 victories daily',
                        'Connect with motivated women in our community',
                        'Improve basics: sleep, nutrition, 10 min movement'
                    ]
                },
                skills: {
                    title: 'ðŸŽ“ Skill Building Solutions',
                    actions: [
                        'Identify TOP 3 needed skills and focus on one',
                        'Find free courses (Coursera, YouTube, LinkedIn)',
                        'Volunteer or shadow someone to learn while doing',
                        'Join professional associations in your target field'
                    ]
                }
            };
            
            let solutionsHTML = '';
            
            obstacles.forEach(obstacle => {
                const solution = solutionMap[obstacle];
                if (solution) {
                    solutionsHTML += `
                        <div class="solution">
                            <h4>${solution.title}</h4>
                            <ul class="action-list">
                                ${solution.actions.map(action => `<li>â€¢ ${action}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            });
            
            return solutionsHTML;
        }
        
        function showEmailSuccessNotification(email) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10001;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2); max-width: 350px;
            `;
            
            notification.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px;">ðŸ“§ Report Sent Successfully!</div>
                <div style="font-size: 0.9rem; opacity: 0.9;">Your obstacle breakthrough action plan has been sent to ${email}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
        
        function showEmailErrorNotification() {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10001;
                background: linear-gradient(135deg, #ef4444, #dc2626);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2); max-width: 350px;
            `;
            
            notification.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px;">âŒ Email Failed</div>
                <div style="font-size: 0.9rem; opacity: 0.9;">Couldn't send your report. Please check your email or try again later.</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }
        
        // Subscription Management Functions
        function manageSubscription(action) {
            let title, message, confirmText, warningText;
            
            switch(action) {
                case 'billing':
                    title = 'ðŸ’³ Update Payment Method';
                    message = 'Update your payment information for your MogulMomma subscription.';
                    confirmText = 'Update Payment';
                    break;
                case 'pause':
                    title = 'â¸ï¸ Pause Subscription';
                    message = 'Temporarily pause your subscription. You can reactivate anytime and pick up where you left off.';
                    confirmText = 'Pause Subscription';
                    warningText = 'During the pause, you\'ll lose access to AI tools and premium features.';
                    break;
                case 'cancel':
                    title = 'âŒ Cancel Subscription';
                    message = 'We\'re sorry to see you go! Your subscription will remain active until your next billing date.';
                    confirmText = 'Cancel Subscription';
                    warningText = 'This action cannot be undone. You\'ll lose access to all premium features.';
                    break;
            }
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10000; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 30px; max-width: 500px; width: 100%; max-height: 90vh; overflow-y: auto;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2 style="color: #1e293b; margin: 0;">${title}</h2>
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="background: none; border: none; font-size: 24px; cursor: pointer; color: #64748b;">Ã—</button>
                    </div>
                    
                    <div style="background: #f8fafc; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                        <div style="font-weight: 600; color: #1e293b; margin-bottom: 8px;">Current Subscription</div>
                        <div style="color: #64748b;">MogulMomma Premium - $97/month</div>
                        <div style="color: #64748b; font-size: 0.9rem;">Next billing: January 15, 2025</div>
                    </div>
                    
                    <p style="color: #64748b; margin-bottom: 20px;">${message}</p>
                    
                    ${warningText ? `
                        <div style="background: #fef2f2; border: 1px solid #fecaca; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                            <div style="color: #dc2626; font-weight: 600; margin-bottom: 5px;">âš ï¸ Important:</div>
                            <div style="color: #dc2626; font-size: 0.9rem;">${warningText}</div>
                        </div>
                    ` : ''}
                    
                    ${action === 'cancel' ? `
                        <div style="margin-bottom: 20px;">
                            <label style="display: block; font-weight: 600; color: #374151; margin-bottom: 8px;">Reason for canceling (optional)</label>
                            <select id="cancelReason" style="width: 100%; padding: 12px; border: 2px solid #e5e7eb; border-radius: 8px;">
                                <option value="">Select a reason...</option>
                                <option value="too_expensive">Too expensive</option>
                                <option value="not_using">Not using features enough</option>
                                <option value="found_alternative">Found an alternative</option>
                                <option value="temporary_break">Taking a temporary break</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    ` : ''}
                    
                    <div style="display: flex; gap: 10px;">
                        <button onclick="this.parentElement.parentElement.parentElement.remove()" style="flex: 1; background: #e5e7eb; color: #374151; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                            Cancel
                        </button>
                        <button onclick="processSubscriptionAction('${action}')" style="flex: 2; background: ${action === 'cancel' ? '#dc2626' : action === 'pause' ? '#f59e0b' : '#10b981'}; color: white; border: none; padding: 15px; border-radius: 10px; font-weight: 600; cursor: pointer;">
                            ${confirmText}
                        </button>
                    </div>
                    
                    ${action === 'cancel' ? `
                        <div style="text-align: center; margin-top: 15px;">
                            <button onclick="manageSubscription('pause')" style="background: none; border: none; color: #7c3aed; text-decoration: underline; cursor: pointer; font-size: 0.9rem;">
                                Maybe just pause instead?
                            </button>
                        </div>
                    ` : ''}
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }
        
        function processSubscriptionAction(action) {
            // Close modal
            document.querySelector('[style*="position: fixed"]').remove();
            document.body.style.overflow = 'auto';
            
            // In production, this would call your payment processor API
            let successMessage;
            
            switch(action) {
                case 'billing':
                    // Would redirect to PayPal customer portal
                    successMessage = 'ðŸ’³ Redirecting to payment portal...';
                    setTimeout(() => {
                        // window.location.href = 'paypal_customer_portal_url';
                        alert('Would redirect to PayPal customer portal for payment updates');
                    }, 1000);
                    break;
                case 'pause':
                    // Update subscription status
                    localStorage.setItem('mogulmomma_subscription_status', 'paused');
                    successMessage = 'â¸ï¸ Subscription paused successfully! Your access will be restricted immediately.';
                    // Redirect to restricted access after a delay
                    setTimeout(() => {
                        window.location.reload();
                    }, 3000);
                    break;
                case 'cancel':
                    const reason = document.getElementById('cancelReason')?.value;
                    // Update subscription status  
                    localStorage.setItem('mogulmomma_subscription_status', 'cancelled');
                    successMessage = 'âŒ Subscription canceled. You\'ll retain access until January 15, 2025, then access will be restricted.';
                    // Log cancellation reason for analytics
                    console.log('Cancellation reason:', reason);
                    // For demo purposes, show immediate effect (in production, this would be scheduled)
                    setTimeout(() => {
                        if (confirm('âš ï¸ Demo: Show immediate cancellation effect?\n\nIn production, you would retain access until your billing period ends (January 15, 2025).')) {
                            localStorage.setItem('mogulmomma_subscription_status', 'expired');
                            window.location.reload();
                        }
                    }, 3000);
                    break;
            }
            
            // Show success notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 20px; right: 20px; z-index: 10001;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white; padding: 15px 20px; border-radius: 10px;
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
                max-width: 350px;
            `;
            
            notification.innerHTML = `
                <div style="font-weight: 600; margin-bottom: 5px;">âœ… Success!</div>
                <div style="font-size: 0.9rem; opacity: 0.9;">${successMessage}</div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 5000);
        }

        // Content Scheduler Functions
        function quickSchedulePost() {
            const content = prompt('Quick Post:\n\nWhat would you like to share with your audience?');
            if (content && content.trim()) {
                // Simulate quick scheduling
                alert(`âœ… Quick post scheduled!\n\nContent: "${content}"\n\nScheduled for: Tomorrow at 9:00 AM\nPlatforms: Instagram, LinkedIn\n\nView full scheduler to customize timing and platforms.`);
                
                // You could save this to localStorage or call the content scheduler API
                const quickPost = {
                    id: Date.now(),
                    content: content,
                    platforms: ['instagram', 'linkedin'],
                    date: new Date(Date.now() + 24*60*60*1000).toISOString().split('T')[0], // Tomorrow
                    time: '09:00',
                    status: 'scheduled',
                    quickPost: true
                };
                
                let scheduledPosts = JSON.parse(localStorage.getItem('mogulmomma_scheduled_posts') || '[]');
                scheduledPosts.push(quickPost);
                localStorage.setItem('mogulmomma_scheduled_posts', JSON.stringify(scheduledPosts));
            }
        }
        
        function viewScheduledPosts() {
            const scheduledPosts = JSON.parse(localStorage.getItem('mogulmomma_scheduled_posts') || '[]');
            
            if (scheduledPosts.length === 0) {
                alert('ðŸ“… No scheduled posts yet!\n\nCreate your first post using the Content Scheduler.');
                return;
            }
            
            const upcoming = scheduledPosts
                .filter(post => new Date(post.date + 'T' + post.time) > new Date())
                .sort((a, b) => new Date(a.date + 'T' + a.time) - new Date(b.date + 'T' + b.time))
                .slice(0, 5);
            
            if (upcoming.length === 0) {
                alert('ðŸ“… No upcoming posts scheduled.\n\nCreate new posts in the Content Scheduler!');
                return;
            }
            
            let message = 'ðŸ“… Your Upcoming Posts:\n\n';
            upcoming.forEach((post, index) => {
                const date = new Date(post.date + 'T' + post.time);
                const formatDate = date.toLocaleDateString();
                const formatTime = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                message += `${index + 1}. ${formatDate} at ${formatTime}\n`;
                message += `   Platform: ${post.platform}\n`;
                message += `   Preview: "${post.content.substring(0, 50)}..."\n\n`;
            });
            
            message += 'Open Content Scheduler to view all posts and make changes.';
            alert(message);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            loadDailyInspiration();
            updateShareButtonText();
            console.log('MogulMomma Community loaded! ðŸ‘‘');
        });
    </script>

    <!-- Subscription Access Control -->
    <script src="supabase-config.js"></script>
    <script>
        // Check subscription status and control access
        function checkSubscriptionAccess() {
            // Get subscription status from localStorage (in production, this would come from your auth system)
            const subscriptionStatus = localStorage.getItem('mogulmomma_subscription_status') || 'active';
            const currentUser = JSON.parse(localStorage.getItem('mogulmomma_current_user') || '{}');
            
            console.log('Checking subscription access...', subscriptionStatus);
            
            if (subscriptionStatus === 'paused') {
                showAccessDenied('paused');
                return false;
            } else if (subscriptionStatus === 'cancelled') {
                showAccessDenied('cancelled');
                return false;
            } else if (subscriptionStatus === 'expired') {
                showAccessDenied('expired');
                return false;
            } else if (subscriptionStatus === 'active') {
                console.log('âœ… Active subscription - full access granted');
                addActiveSubscriptionNotice();
                return true;
            }
            
            // Default to demo mode for testing
            addDemoNotice();
            return true;
        }

        function showAccessDenied(reason) {
            // Hide main content
            document.querySelector('.container').style.display = 'none';
            
            // Create access denied page
            const accessDeniedHTML = `
                <div style="min-height: 100vh; background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); display: flex; align-items: center; justify-content: center; padding: 20px;">
                    <div style="background: white; border-radius: 20px; padding: 50px; max-width: 600px; text-align: center; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);">
                        <div style="font-size: 4rem; margin-bottom: 20px;">
                            ${reason === 'paused' ? 'â¸ï¸' : reason === 'cancelled' ? 'âŒ' : 'â°'}
                        </div>
                        <h1 style="color: #1e293b; margin-bottom: 20px; font-size: 2rem;">
                            ${reason === 'paused' ? 'Subscription Paused' : reason === 'cancelled' ? 'Subscription Cancelled' : 'Subscription Expired'}
                        </h1>
                        <p style="color: #64748b; font-size: 1.1rem; margin-bottom: 30px; line-height: 1.6;">
                            ${getAccessDeniedMessage(reason)}
                        </p>
                        
                        <div style="background: #fef3c7; border: 2px solid #f59e0b; border-radius: 15px; padding: 25px; margin-bottom: 30px;">
                            <h3 style="color: #92400e; margin-bottom: 15px;">âœ¨ Regain Full Access</h3>
                            <ul style="text-align: left; color: #92400e; line-height: 1.8; margin-bottom: 20px;">
                                <li>ðŸ“… Content Scheduler & Social Media Tools</li>
                                <li>ðŸ¤– Unlimited AI Content Generation</li>
                                <li>ðŸ‘¥ Private Community Access</li>
                                <li>ðŸ’° Affiliate Program Participation</li>
                                <li>ðŸ“Š Analytics & Reporting Tools</li>
                                <li>ðŸ’¬ 1:1 Coaching Support</li>
                            </ul>
                        </div>
                        
                        <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                            ${reason === 'paused' ? 
                                '<button onclick="reactivateSubscription()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 15px 30px; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 1.1rem;">ðŸ”„ Reactivate Subscription</button>' :
                                '<button onclick="renewSubscription()" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 15px 30px; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 1.1rem;">ðŸ’Ž Renew Membership - $97/month</button>'
                            }
                            <button onclick="window.location.href='/'" style="background: #f1f5f9; color: #64748b; border: 2px solid #e2e8f0; padding: 15px 30px; border-radius: 12px; font-weight: 600; cursor: pointer; font-size: 1.1rem;">ðŸ  Return Home</button>
                        </div>
                        
                        <p style="color: #94a3b8; font-size: 0.9rem; margin-top: 25px;">
                            Questions? Contact us at <a href="mailto:hello@mogulmomma.com" style="color: #7c3aed;">hello@mogulmomma.com</a>
                        </p>
                    </div>
                </div>
            `;
            
            document.body.innerHTML = accessDeniedHTML;
        }

        function getAccessDeniedMessage(reason) {
            switch(reason) {
                case 'paused':
                    return 'Your subscription is currently paused. While paused, you won\'t have access to premium features like the community, AI tools, or content scheduler. You can reactivate your subscription anytime to regain full access.';
                case 'cancelled':
                    return 'Your subscription has been cancelled. You\'ll retain access until your current billing period ends. After that, you\'ll need to renew your membership to continue using premium features.';
                case 'expired':
                    return 'Your subscription has expired. Renew your membership to regain access to all premium features and continue your journey with the MogulMomma community.';
                default:
                    return 'There seems to be an issue with your subscription. Please contact support for assistance.';
            }
        }

        function reactivateSubscription() {
            if (confirm('Reactivate your MogulMomma subscription?\n\nYour subscription will resume immediately and you\'ll regain full access to all premium features.\n\nNext billing: $97 on your next billing date.')) {
                // Simulate reactivation
                localStorage.setItem('mogulmomma_subscription_status', 'active');
                alert('âœ… Subscription reactivated successfully!\n\nWelcome back! You now have full access to all MogulMomma features.');
                window.location.reload();
            }
        }

        function renewSubscription() {
            // Redirect to membership page
            window.location.href = '/membership';
        }

        function addActiveSubscriptionNotice() {
            const header = document.querySelector('.header-content');
            if (header) {
                const activeNotice = document.createElement('div');
                activeNotice.innerHTML = 'âœ… Active Member';
                activeNotice.style.cssText = 'color: #10b981; font-weight: 600; background: rgba(16, 185, 129, 0.1); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem;';
                header.appendChild(activeNotice);
            }
        }
        
        function addDemoNotice() {
            const header = document.querySelector('.header-content');
            if (header) {
                const demoNotice = document.createElement('div');
                demoNotice.innerHTML = 'ðŸš€ Demo Mode';
                demoNotice.style.cssText = 'color: #7c3aed; font-weight: 600; background: rgba(124, 58, 237, 0.1); padding: 8px 15px; border-radius: 20px; font-size: 0.9rem;';
                header.appendChild(demoNotice);
            }
        }

        // Utility function to test different subscription states
        function testSubscriptionState(state) {
            localStorage.setItem('mogulmomma_subscription_status', state);
            window.location.reload();
        }

        // Supabase Database Integration
        let supabaseClient = null;
        
        function initializeSupabase() {
            // Load config
            const script = document.createElement('script');
            script.src = '/supabase-config.js';
            script.onload = function() {
                if (typeof supabaseClient !== 'undefined') {
                    console.log('âœ… Supabase connected successfully');
                    // Test connection
                    testSupabaseConnection();
                } else {
                    console.warn('âš ï¸ Supabase configuration not found, using localStorage');
                }
            };
            script.onerror = function() {
                console.warn('âš ï¸ Supabase config failed to load, using localStorage');
            };
            document.head.appendChild(script);
        }
        
        async function testSupabaseConnection() {
            try {
                const { data, error } = await supabaseClient.from('profiles').select('count').limit(1);
                if (error) throw error;
                console.log('âœ… Supabase database connection verified');
            } catch (error) {
                console.warn('âš ï¸ Supabase connection test failed:', error.message);
            }
        }
        
        // Enhanced data storage functions that use Supabase when available
        async function saveUserPost(postData) {
            try {
                if (supabaseClient) {
                    const { data, error } = await supabaseClient
                        .from('community_posts')
                        .insert([{
                            user_email: postData.userEmail,
                            user_name: postData.userName,
                            content: postData.content,
                            post_type: postData.type || 'general',
                            tags: postData.tags || [],
                            created_at: new Date().toISOString()
                        }]);
                    
                    if (error) throw error;
                    console.log('âœ… Post saved to database');
                    return data;
                } else {
                    // Fallback to localStorage
                    return saveToLocalStorage('mogulmomma_user_posts', postData);
                }
            } catch (error) {
                console.error('âŒ Error saving post:', error);
                // Fallback to localStorage on error
                return saveToLocalStorage('mogulmomma_user_posts', postData);
            }
        }
        
        async function saveObstacleAssessment(assessment) {
            try {
                if (supabaseClient) {
                    const { data, error } = await supabaseClient
                        .from('obstacle_assessments')
                        .insert([{
                            user_email: assessment.userEmail,
                            obstacles: assessment.obstacles,
                            details: assessment.details,
                            solutions_provided: assessment.solutions || [],
                            created_at: new Date().toISOString()
                        }]);
                    
                    if (error) throw error;
                    console.log('âœ… Obstacle assessment saved to database');
                    return data;
                } else {
                    return saveToLocalStorage('mogulmomma_obstacle_assessments', assessment);
                }
            } catch (error) {
                console.error('âŒ Error saving obstacle assessment:', error);
                return saveToLocalStorage('mogulmomma_obstacle_assessments', assessment);
            }
        }
        
        async function saveWeeklyJournal(journalData) {
            try {
                if (supabaseClient) {
                    const { data, error } = await supabaseClient
                        .from('weekly_journals')
                        .insert([{
                            user_email: journalData.userEmail,
                            week_start: journalData.week_start,
                            career_score: journalData.career_score,
                            growth_score: journalData.growth_score,
                            balance_score: journalData.balance_score,
                            confidence_score: journalData.confidence_score,
                            overall_score: journalData.overall_score,
                            week_wins: journalData.week_wins,
                            week_challenges: journalData.week_challenges,
                            next_week_goals: journalData.next_week_goals,
                            reflection: journalData.reflection,
                            created_at: new Date().toISOString()
                        }]);
                    
                    if (error) throw error;
                    console.log('âœ… Weekly journal saved to database');
                    return data;
                } else {
                    return saveToLocalStorage('mogulmomma_weekly_journals', journalData);
                }
            } catch (error) {
                console.error('âŒ Error saving weekly journal:', error);
                return saveToLocalStorage('mogulmomma_weekly_journals', journalData);
            }
        }
        
        async function saveTrialMember(memberData) {
            try {
                if (supabaseClient) {
                    const { data, error } = await supabaseClient
                        .from('trial_members')
                        .insert([{
                            email: memberData.email,
                            name: memberData.name,
                            trial_code: memberData.code,
                            activated_at: memberData.activatedAt,
                            expires_at: memberData.expiresAt,
                            status: 'active'
                        }]);
                    
                    if (error) throw error;
                    console.log('âœ… Trial member saved to database');
                    return data;
                } else {
                    return saveToLocalStorage('mogulmomma_trial_members', memberData);
                }
            } catch (error) {
                console.error('âŒ Error saving trial member:', error);
                return saveToLocalStorage('mogulmomma_trial_members', memberData);
            }
        }
        
        // Utility function for localStorage fallback
        function saveToLocalStorage(key, data) {
            try {
                let existing = JSON.parse(localStorage.getItem(key) || '[]');
                if (!Array.isArray(existing)) existing = [];
                existing.push(data);
                localStorage.setItem(key, JSON.stringify(existing));
                console.log(`âœ… Data saved to localStorage (${key})`);
                return data;
            } catch (error) {
                console.error('âŒ Error saving to localStorage:', error);
                return null;
            }
        }

        // Share Invitation Function
        function shareInvitation() {
            console.log('shareInvitation called');
            alert('Invite function working! Opening invitation modal...');
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                background: rgba(0,0,0,0.8); z-index: 10001; display: flex; 
                align-items: center; justify-content: center; padding: 20px;
                backdrop-filter: blur(5px);
            `;
            
            modal.innerHTML = `
                <div style="background: white; border-radius: 20px; padding: 40px; max-width: 600px; width: 100%; text-align: center; box-shadow: 0 25px 50px rgba(0,0,0,0.3);">
                    <div style="font-size: 3rem; margin-bottom: 20px;">ðŸ’Œ</div>
                    <h2 style="color: #1e293b; margin-bottom: 15px; font-size: 1.8rem;">Invite Someone Amazing!</h2>
                    <p style="color: #64748b; margin-bottom: 30px; font-size: 1.1rem;">Share MogulMomma with accomplished women ready to transform their careers</p>
                    
                    <div style="background: #f8fafc; padding: 25px; border-radius: 12px; margin-bottom: 25px; text-align: left;">
                        <h3 style="color: #7c3aed; margin-bottom: 15px; text-align: center;">ðŸŽ¯ Perfect for Women Who:</h3>
                        <ul style="color: #64748b; line-height: 1.8; padding-left: 20px;">
                            <li>Are accomplished professionals ready for their next chapter</li>
                            <li>Want to transition careers or start their own business</li>
                            <li>Need AI-powered tools and expert guidance</li>
                            <li>Crave community with like-minded ambitious women</li>
                            <li>Are tired of settling and ready to build their dreams</li>
                        </ul>
                    </div>
                    
                    <div style="background: linear-gradient(135deg, #f0f9ff, #dbeafe); padding: 20px; border-radius: 12px; margin-bottom: 25px; border-left: 4px solid #3b82f6;">
                        <h4 style="color: #1e40af; margin-bottom: 10px;">ðŸ“± Ready-to-Share Message:</h4>
                        <div id="shareMessage" style="background: white; padding: 15px; border-radius: 8px; font-size: 0.95rem; line-height: 1.6; color: #1e293b; text-align: left;">
                            ðŸš€ I found an incredible community for accomplished women ready to transform their careers!
                            
                            âœ¨ MogulMomma has AI-powered tools, expert guidance, and a supportive community of ambitious women building their dreams.
                            
                            If you're ready to stop settling and start creating the career & life you truly want, check it out: https://mogulmomma.com
                            
                            #CareerTransformation #WomenInBusiness #DreamBuilder #MogulMomma
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                        <button onclick="copyInviteMessage()" style="background: linear-gradient(135deg, #7c3aed, #c084fc); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                            ðŸ“‹ Copy Message
                        </button>
                        <button onclick="shareViaEmail()" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                            âœ‰ï¸ Share via Email
                        </button>
                        <button onclick="shareOnSocial('linkedin')" style="background: linear-gradient(135deg, #0077b5, #005885); color: white; border: none; padding: 12px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem;">
                            ðŸ’¼ LinkedIn
                        </button>
                    </div>
                    
                    <button onclick="this.parentElement.parentElement.remove(); document.body.style.overflow = 'auto';" style="background: #f1f5f9; color: #64748b; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 0.9rem; margin-top: 20px;">
                        Close
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            document.body.style.overflow = 'hidden';
            
            // Close on background click
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                    document.body.style.overflow = 'auto';
                }
            });
        }

        function copyInviteMessage() {
            const message = document.getElementById('shareMessage').textContent;
            navigator.clipboard.writeText(message).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'âœ… Copied!';
                btn.style.background = '#10b981';
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = 'linear-gradient(135deg, #7c3aed, #c084fc)';
                }, 2000);
            }).catch(() => {
                alert('Message copied to clipboard:\\n\\n' + message);
            });
        }

        function shareViaEmail() {
            const subject = 'Join me in the MogulMomma Community!';
            const body = document.getElementById('shareMessage').textContent;
            const mailtoLink = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            window.open(mailtoLink);
        }

        function shareOnSocial(platform) {
            const message = "ðŸš€ Discovered an incredible community for accomplished women ready to transform their careers! Join me at MogulMomma: https://mogulmomma.com #CareerTransformation #WomenInBusiness #MogulMomma";
            
            let shareUrl = '';
            switch(platform) {
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent('https://mogulmomma.com')}&summary=${encodeURIComponent(message)}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent('https://mogulmomma.com')}&quote=${encodeURIComponent(message)}`;
                    break;
            }
            
            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
            }
        }

        // Check access when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(checkSubscriptionAccess, 100); // Small delay to ensure DOM is ready
        });
    </script>
</body>
</html>